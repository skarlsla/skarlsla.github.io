<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title></title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://skarlsla.github.io/"/>
  <updated>2022-02-03T08:54:09.994Z</updated>
  <id>https://skarlsla.github.io/</id>
  
  <author>
    <name>NamGi YOON</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>[TYPESCRIPT] 타입스크립트 디자인 패턴 - Factory</title>
    <link href="https://skarlsla.github.io/2022/01/03/pattern-factory/"/>
    <id>https://skarlsla.github.io/2022/01/03/pattern-factory/</id>
    <published>2022-01-03T07:35:30.000Z</published>
    <updated>2022-02-03T08:54:09.994Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Factory-Pattern"><a href="#Factory-Pattern" class="headerlink" title="Factory Pattern"></a>Factory Pattern</h3><p>The factory pattern is one of the creational software design patterns. </p><p>Creational: 오브젝트의 생성을 다루는</p><p><strong>이점</strong></p><ol><li>객체 생성 프로세스가 복잡한 상황이나 동일한 속성을 공유하는 여러 객체가 생성되는 상황에서 사용될 수 있습니다.</li></ol><p>예제<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mavelfactory.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MavelFactory</span> </span>&#123;</span><br><span class="line">  private name: string;</span><br><span class="line">  private power: number;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">constructor</span>(name: string, power: number) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.power = power;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  introduce() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hello, I am <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>.`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createHero</span>(<span class="params">name: string, power: number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> HeroFactory(name, power);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>실행<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.ts</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> mavelfactory <span class="keyword">from</span> <span class="string">'./mavelfactory'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> spiderman = heroFactory.createHero(<span class="string">'Peter'</span>, <span class="number">100</span>);</span><br><span class="line">spiderman.introduce(); </span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> ironman = heroFactory.createHero(<span class="string">'Stark'</span>, <span class="number">100</span>);</span><br><span class="line">ironman.introduce();</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Factory-Pattern&quot;&gt;&lt;a href=&quot;#Factory-Pattern&quot; class=&quot;headerlink&quot; title=&quot;Factory Pattern&quot;&gt;&lt;/a&gt;Factory Pattern&lt;/h3&gt;&lt;p&gt;The factory patter
      
    
    </summary>
    
      <category term="patterns" scheme="https://skarlsla.github.io/categories/patterns/"/>
    
    
      <category term="typescript" scheme="https://skarlsla.github.io/tags/typescript/"/>
    
      <category term="pattern" scheme="https://skarlsla.github.io/tags/pattern/"/>
    
      <category term="Factory" scheme="https://skarlsla.github.io/tags/Factory/"/>
    
  </entry>
  
  <entry>
    <title>[TYPESCRIPT] 타입스크립트 디자인 패턴 - Facade</title>
    <link href="https://skarlsla.github.io/2022/01/03/pattern-facade/"/>
    <id>https://skarlsla.github.io/2022/01/03/pattern-facade/</id>
    <published>2022-01-03T07:34:30.000Z</published>
    <updated>2022-02-03T08:54:43.530Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Facade-Pattern"><a href="#Facade-Pattern" class="headerlink" title="Facade Pattern"></a>Facade Pattern</h3><p>The façade pattern is one of the structural software design patterns.</p><p>Structural: 객체간의 관계를 처리</p><p><strong>이점</strong></p><ol><li>여러시스템을 통합하는 인터페이스가 필요한 경우 사용.</li></ol><p>서브시스템1<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// subsystem1.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Contract</span> </span>&#123;</span><br><span class="line">  private contractTerminationDateexport <span class="class"><span class="keyword">class</span> <span class="title">Contract</span> </span>&#123;</span><br><span class="line">  private contractTerminationDate: <span class="built_in">Date</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(terminationDate: Date) &#123;</span><br><span class="line">    <span class="keyword">this</span>.contractTerminationDate = terminationDate;</span><br><span class="line">  &#125;</span><br><span class="line">  checkActiveContract(date: <span class="built_in">Date</span>): boolean &#123;</span><br><span class="line">    <span class="keyword">if</span> (date &lt; <span class="keyword">this</span>.contractTerminationDate) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>서브시스템2<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// subsystem2.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">TeamFunds</span> </span>&#123;</span><br><span class="line">  private totalFunds: number;</span><br><span class="line">  <span class="keyword">constructor</span>(total: number) &#123;</span><br><span class="line">    <span class="keyword">this</span>.totalFunds = total;</span><br><span class="line">  &#125;</span><br><span class="line">  checkFunds(transferFee: number): boolean &#123;</span><br><span class="line">    <span class="keyword">if</span> (transferFee &lt; <span class="keyword">this</span>.totalFunds) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Facade 패턴으로 2개의 서브 시스템을 통합하여 기능제공<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// facade.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Contract &#125; <span class="keyword">from</span> <span class="string">'./subsystem1'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; TeamFunds &#125; <span class="keyword">from</span> <span class="string">'./subsystem2'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">  private contract: Contract = <span class="keyword">new</span> Contract(<span class="keyword">new</span> <span class="built_in">Date</span>(<span class="keyword">new</span> <span class="built_in">Date</span>().setDate(<span class="keyword">new</span> <span class="built_in">Date</span>().getDate() + <span class="number">10</span>)));</span><br><span class="line">  private funds: TeamFunds = <span class="keyword">new</span> TeamFunds(<span class="number">200000</span>);</span><br><span class="line"> </span><br><span class="line">  private playerContract: <span class="built_in">Date</span>;</span><br><span class="line">  private playerPrice: number;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">constructor</span>(playerPrice: number) &#123;</span><br><span class="line">    <span class="keyword">this</span>.playerContract = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">this</span>.playerPrice = playerPrice;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  buyPlayer(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.contract.checkActiveContract(<span class="keyword">this</span>.playerContract)) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Player has active contract'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'Player has no active contract'</span>);</span><br><span class="line">      <span class="keyword">if</span> (!<span class="keyword">this</span>.funds.checkFunds(<span class="keyword">this</span>.playerPrice)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Player is too expensive to buy.'</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Player can be bought.'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>사용시<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Facade &#125; <span class="keyword">from</span> <span class="string">'./facade'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> facade: Facade = <span class="keyword">new</span> Facade(<span class="number">200001</span>);</span><br><span class="line">facade.buyPlayer();</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Facade-Pattern&quot;&gt;&lt;a href=&quot;#Facade-Pattern&quot; class=&quot;headerlink&quot; title=&quot;Facade Pattern&quot;&gt;&lt;/a&gt;Facade Pattern&lt;/h3&gt;&lt;p&gt;The façade pattern is 
      
    
    </summary>
    
      <category term="patterns" scheme="https://skarlsla.github.io/categories/patterns/"/>
    
    
      <category term="typescript" scheme="https://skarlsla.github.io/tags/typescript/"/>
    
      <category term="Facade" scheme="https://skarlsla.github.io/tags/Facade/"/>
    
      <category term="pattern" scheme="https://skarlsla.github.io/tags/pattern/"/>
    
  </entry>
  
  <entry>
    <title>[TYPESCRIPT] 타입스크립트 디자인 패턴 - Adapter</title>
    <link href="https://skarlsla.github.io/2022/01/03/pattern-adapter/"/>
    <id>https://skarlsla.github.io/2022/01/03/pattern-adapter/</id>
    <published>2022-01-03T07:24:30.000Z</published>
    <updated>2022-02-03T08:54:53.175Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Adapter-Pattern"><a href="#Adapter-Pattern" class="headerlink" title="Adapter Pattern"></a>Adapter Pattern</h3><p>The adapter pattern is one of the structural software design patterns.</p><p>Structural: 객체간의 관계를 처리</p><p><strong>이점</strong></p><ol><li>클라이언트 인터페이스를 변경하지 않고 새로운 시스템의 기능을 제공하게 한다.</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// adapter.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; IGeoCoder, GeoCoder &#125; <span class="keyword">from</span> <span class="string">'./impl-class'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Locator &#125; <span class="keyword">from</span> <span class="string">'./new-class'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">GeocodingAdapter</span> <span class="title">implements</span> <span class="title">IGeoCoder</span> </span>&#123;</span><br><span class="line">  private latitude: number;</span><br><span class="line">  private longitude: number;</span><br><span class="line">  private type: string;</span><br><span class="line">  <span class="keyword">constructor</span>(latitude, longitude, type) &#123;</span><br><span class="line">    <span class="keyword">this</span>.latitude = latitude;</span><br><span class="line">    <span class="keyword">this</span>.longitude = longitude;</span><br><span class="line">    <span class="keyword">this</span>.type = type;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  locate(): string &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.type === <span class="string">'GeoCoder'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> geocoder = <span class="keyword">new</span> GeoCoder(<span class="keyword">this</span>.latitude, <span class="keyword">this</span>.longitude);</span><br><span class="line">      <span class="keyword">return</span> geocoder.locate();</span><br><span class="line"> </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.type === <span class="string">'Locator'</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> locator = <span class="keyword">new</span> Locator(<span class="keyword">this</span>.latitude, <span class="keyword">this</span>.longitude);</span><br><span class="line">      <span class="keyword">return</span> locator.geocode();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Please use either GeoCoder or Locator'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// client.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; GeocodingAdapter &#125; <span class="keyword">from</span> <span class="string">'./adapter'</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> gAdapter = <span class="keyword">new</span> GeocodingAdapter(<span class="number">51.5074</span>, <span class="number">0.1278</span>, <span class="string">'Locator'</span>);</span><br><span class="line"><span class="keyword">const</span> gAdapter2 = <span class="keyword">new</span> GeocodingAdapter(<span class="number">51.5074</span>, <span class="number">0.1278</span>, <span class="string">'GeoCoder'</span>);</span><br><span class="line"><span class="keyword">const</span> locationFromLocator = gAdapter.locate();</span><br><span class="line"><span class="keyword">const</span> locationFromGeoCoder = gAdapter2.locate();</span><br><span class="line"> </span><br><span class="line"><span class="built_in">console</span>.log(locationFromLocator);</span><br><span class="line"><span class="built_in">console</span>.log(locationFromGeoCoder);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Adapter-Pattern&quot;&gt;&lt;a href=&quot;#Adapter-Pattern&quot; class=&quot;headerlink&quot; title=&quot;Adapter Pattern&quot;&gt;&lt;/a&gt;Adapter Pattern&lt;/h3&gt;&lt;p&gt;The adapter patter
      
    
    </summary>
    
      <category term="patterns" scheme="https://skarlsla.github.io/categories/patterns/"/>
    
    
      <category term="typescript" scheme="https://skarlsla.github.io/tags/typescript/"/>
    
      <category term="pattern" scheme="https://skarlsla.github.io/tags/pattern/"/>
    
      <category term="Adapter" scheme="https://skarlsla.github.io/tags/Adapter/"/>
    
  </entry>
  
  <entry>
    <title>[JUMIO] JUMIO API FLOW </title>
    <link href="https://skarlsla.github.io/2021/08/04/jumio/"/>
    <id>https://skarlsla.github.io/2021/08/04/jumio/</id>
    <published>2021-08-04T03:50:55.000Z</published>
    <updated>2022-02-03T02:54:32.432Z</updated>
    
    <content type="html"><![CDATA[<h3 id="JUMIO-SDK-FLOW"><a href="#JUMIO-SDK-FLOW" class="headerlink" title="JUMIO SDK FLOW"></a>JUMIO SDK FLOW</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/CRM_EVS.jpg" alt="FLOW"></p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/CRM_EVS2.jpg" alt="FLOW"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;JUMIO-SDK-FLOW&quot;&gt;&lt;a href=&quot;#JUMIO-SDK-FLOW&quot; class=&quot;headerlink&quot; title=&quot;JUMIO SDK FLOW&quot;&gt;&lt;/a&gt;JUMIO SDK FLOW&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;https://raw.
      
    
    </summary>
    
      <category term="JUMIO" scheme="https://skarlsla.github.io/categories/JUMIO/"/>
    
    
      <category term="KYC" scheme="https://skarlsla.github.io/tags/KYC/"/>
    
      <category term="JUMIO SDK" scheme="https://skarlsla.github.io/tags/JUMIO-SDK/"/>
    
      <category term="AML" scheme="https://skarlsla.github.io/tags/AML/"/>
    
      <category term="JUMIO FLOW" scheme="https://skarlsla.github.io/tags/JUMIO-FLOW/"/>
    
  </entry>
  
  <entry>
    <title>[SUMSUB] SUBSUB API LIST &amp; FLOW </title>
    <link href="https://skarlsla.github.io/2021/06/04/sumsub/"/>
    <id>https://skarlsla.github.io/2021/06/04/sumsub/</id>
    <published>2021-06-04T02:53:45.000Z</published>
    <updated>2021-06-04T02:58:37.011Z</updated>
    
    <content type="html"><![CDATA[<h3 id="SUMSUB-SDK-TOKEN-FLOW-amp-API-LIST"><a href="#SUMSUB-SDK-TOKEN-FLOW-amp-API-LIST" class="headerlink" title="SUMSUB SDK TOKEN FLOW &amp; API LIST"></a>SUMSUB SDK TOKEN FLOW &amp; API LIST</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/sumsub_flow.JPG" alt="FLOW"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;SUMSUB-SDK-TOKEN-FLOW-amp-API-LIST&quot;&gt;&lt;a href=&quot;#SUMSUB-SDK-TOKEN-FLOW-amp-API-LIST&quot; class=&quot;headerlink&quot; title=&quot;SUMSUB SDK TOKEN FLOW &amp;a
      
    
    </summary>
    
      <category term="SUMSUB" scheme="https://skarlsla.github.io/categories/SUMSUB/"/>
    
    
      <category term="KYC" scheme="https://skarlsla.github.io/tags/KYC/"/>
    
      <category term="AML" scheme="https://skarlsla.github.io/tags/AML/"/>
    
      <category term="SUMSUB SDK" scheme="https://skarlsla.github.io/tags/SUMSUB-SDK/"/>
    
      <category term="SUMSUB FLOW" scheme="https://skarlsla.github.io/tags/SUMSUB-FLOW/"/>
    
  </entry>
  
  <entry>
    <title>[AWS] 서버리스 프레임워크 간단한 예제(Serverless Framework Simple Example)</title>
    <link href="https://skarlsla.github.io/2020/02/11/aws-serverless-framework/"/>
    <id>https://skarlsla.github.io/2020/02/11/aws-serverless-framework/</id>
    <published>2020-02-11T07:43:15.000Z</published>
    <updated>2020-02-11T05:27:53.583Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Serverless-프레임워크는-서버리스-애플리케이션을-생성하고-배포하기-위해-필요한-모든-도구들을-쉽게-관리할-수-있는-패키지-형태로-묶어서-제공한다"><a href="#Serverless-프레임워크는-서버리스-애플리케이션을-생성하고-배포하기-위해-필요한-모든-도구들을-쉽게-관리할-수-있는-패키지-형태로-묶어서-제공한다" class="headerlink" title="Serverless 프레임워크는 서버리스 애플리케이션을 생성하고 배포하기 위해 필요한 모든 도구들을 쉽게 관리할 수 있는 패키지 형태로 묶어서 제공한다."></a>Serverless 프레임워크는 서버리스 애플리케이션을 생성하고 배포하기 위해 필요한 모든 도구들을 쉽게 관리할 수 있는 패키지 형태로 묶어서 제공한다.</h3><h3 id="serverless-cli-를-이용한-간단한-serverless-테스트"><a href="#serverless-cli-를-이용한-간단한-serverless-테스트" class="headerlink" title="serverless cli 를 이용한 간단한 serverless 테스트"></a>serverless cli 를 이용한 간단한 serverless 테스트</h3><p>node 와 npm 설치 생략…</p><p><strong>1. serverless cli 설치</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g serverless</span><br></pre></td></tr></table></figure></p><hr><p><strong>2. 서비스/프로젝트 생성</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">serverless</span><br><span class="line">Serverless: No project detected. Do you want to create a new one? Yes</span><br><span class="line">Serverless: What do you want to make? AWS Node.js </span><br><span class="line">Serverless: What do you want to call this project? sample</span><br><span class="line"> </span><br><span class="line">Project successfully created in &apos;sample&apos; folder.</span><br><span class="line">(node:30044) Warning: a promise was created in a handler at domain.js:121:23 but was not returned from it, see http://goo    at Object.ret [as lstatAsync] (eval at makeNodePromisifiedEval (C:\Users\DEV\AppData\Roaming\npm\node_modules\serverless\node_modules\bluebird\js\release\promisify.js:184:12), &lt;anonymous&gt;:8:21)</span><br><span class="line"> </span><br><span class="line">You can monitor, troubleshoot, and test your new service with a free Serverless account.</span><br><span class="line"> </span><br><span class="line">Serverless: Would you like to enable this? Yes</span><br><span class="line"> </span><br><span class="line">Serverless: What application do you want to add this to? (Use arrow keys)</span><br><span class="line">Serverless: What application do you want to add this to? myapp</span><br><span class="line"> </span><br><span class="line">Your project is setup for monitoring, troubleshooting and testing</span><br><span class="line"> </span><br><span class="line">Deploy your project and monitor, troubleshoot and test it:</span><br><span class="line">- Run “serverless deploy” to deploy your service.</span><br><span class="line">- Run “serverless dashboard” to view the dashboard.</span><br></pre></td></tr></table></figure></p><hr><p><strong>3. 샘플소스</strong><br>handler.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&apos;use strict&apos;;</span><br><span class="line"> </span><br><span class="line">module.exports.hello = async event =&gt; &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    statusCode: 200,</span><br><span class="line">    body: JSON.stringify(</span><br><span class="line">      &#123;</span><br><span class="line">        message: &apos;Go Serverless v1.0! Your function executed successfully!&apos;,</span><br><span class="line">        input: event,</span><br><span class="line">      &#125;,</span><br><span class="line">      null,</span><br><span class="line">      2</span><br><span class="line">    ),</span><br><span class="line">  &#125;;</span><br><span class="line"> </span><br><span class="line">  // Use this code if you don&apos;t use the http event with the LAMBDA-PROXY integration</span><br><span class="line">  // return &#123; message: &apos;Go Serverless v1.0! Your function executed successfully!&apos;, event &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>serverless.yml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">service: sample</span><br><span class="line"> </span><br><span class="line">app: myapp</span><br><span class="line">org: skarlsla</span><br><span class="line"> </span><br><span class="line">provider:</span><br><span class="line">  name: aws</span><br><span class="line">  runtime: nodejs12.x</span><br><span class="line"> </span><br><span class="line">functions:</span><br><span class="line">  hello:</span><br><span class="line">    handler: handler.hello</span><br><span class="line">## endpoint 추가</span><br><span class="line">    events:</span><br><span class="line">      - http:</span><br><span class="line">          path: hello</span><br><span class="line">          method: post</span><br></pre></td></tr></table></figure></p><hr><p><strong>4. 배포(serverless deploy)</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">serverless deploy -v</span><br><span class="line">Serverless: Packaging service...</span><br><span class="line">Serverless: Excluding development dependencies...</span><br><span class="line">Serverless: Installing dependencies for custom CloudFormation resources...</span><br><span class="line">Serverless: Safeguards Processing...</span><br><span class="line">Serverless: Safeguards Results:</span><br><span class="line"> </span><br><span class="line">   Summary --------------------------------------------------</span><br><span class="line"> </span><br><span class="line">   warned - require-cfn-role</span><br><span class="line">   passed - allowed-runtimes</span><br><span class="line">   passed - framework-version</span><br><span class="line">   passed - allowed-stages</span><br><span class="line">   passed - allowed-regions</span><br><span class="line">   passed - no-unsafe-wildcard-iam-permissions</span><br><span class="line">   passed - no-secret-env-vars</span><br><span class="line"> </span><br><span class="line">   Details --------------------------------------------------</span><br><span class="line"> </span><br><span class="line">   1) Warned - no cfnRole set</span><br><span class="line">      details: http://slss.io/sg-require-cfn-role</span><br><span class="line">      Require the cfnRole option, which specifies a particular role for CloudFormation to assume while deploying.       </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">Serverless: Safeguards Summary: 6 passed, 1 warnings, 0 errors</span><br><span class="line">Serverless: Uploading CloudFormation file to S3...</span><br><span class="line">Serverless: Uploading artifacts...</span><br><span class="line">Serverless: Uploading service sample.zip file to S3 (68.29 KB)...</span><br><span class="line">Serverless: Uploading custom CloudFormation resources...</span><br><span class="line">Serverless: Validating template...</span><br><span class="line">Serverless: Updating Stack...</span><br><span class="line">Serverless: Checking Stack update progress...</span><br><span class="line">CloudFormation - UPDATE_IN_PROGRESS - AWS::CloudFormation::Stack - sample-dev</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::ApiGateway::RestApi - ApiGatewayRestApi</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::Logs::LogGroup - ApiGatewayLogGroup</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::IAM::Role - IamRoleCustomResourcesLambdaExecution</span><br><span class="line">CloudFormation - UPDATE_IN_PROGRESS - AWS::Lambda::Function - HelloLambdaFunction</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::IAM::Role - IamRoleCustomResourcesLambdaExecution</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::ApiGateway::RestApi - ApiGatewayRestApi</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::Logs::LogGroup - ApiGatewayLogGroup</span><br><span class="line">CloudFormation - CREATE_COMPLETE - AWS::ApiGateway::RestApi - ApiGatewayRestApi</span><br><span class="line">CloudFormation - CREATE_COMPLETE - AWS::Logs::LogGroup - ApiGatewayLogGroup</span><br><span class="line">CloudFormation - UPDATE_COMPLETE - AWS::Lambda::Function - HelloLambdaFunction</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::ApiGateway::Resource - ApiGatewayResourceHello</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::Lambda::Version - HelloLambdaVersiong6DbuZk46pqXfxgUZxqbVYYaGuA5hOV9bb2oYYmZCQCloudFormation - CREATE_IN_PROGRESS - AWS::Logs::SubscriptionFilter - CloudWatchLogsSubscriptionFilterApiGatewayLogGroup</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::Lambda::Permission - HelloLambdaPermissionApiGateway</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::Logs::SubscriptionFilter - CloudWatchLogsSubscriptionFilterApiGatewayLogGroup</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::Lambda::Permission - HelloLambdaPermissionApiGateway</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::ApiGateway::Resource - ApiGatewayResourceHello</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::Lambda::Version - HelloLambdaVersiong6DbuZk46pqXfxgUZxqbVYYaGuA5hOV9bb2oYYmZCQCloudFormation - CREATE_COMPLETE - AWS::Logs::SubscriptionFilter - CloudWatchLogsSubscriptionFilterApiGatewayLogGroup   </span><br><span class="line">CloudFormation - CREATE_COMPLETE - AWS::ApiGateway::Resource - ApiGatewayResourceHello</span><br><span class="line">CloudFormation - CREATE_COMPLETE - AWS::Lambda::Version - HelloLambdaVersiong6DbuZk46pqXfxgUZxqbVYYaGuA5hOV9bb2oYYmZCQ  </span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::ApiGateway::Method - ApiGatewayMethodHelloPost</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::ApiGateway::Method - ApiGatewayMethodHelloPost</span><br><span class="line">CloudFormation - CREATE_COMPLETE - AWS::ApiGateway::Method - ApiGatewayMethodHelloPost</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::ApiGateway::Deployment - ApiGatewayDeployment1577175940021</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::ApiGateway::Deployment - ApiGatewayDeployment1577175940021</span><br><span class="line">CloudFormation - CREATE_COMPLETE - AWS::ApiGateway::Deployment - ApiGatewayDeployment1577175940021</span><br><span class="line">CloudFormation - CREATE_COMPLETE - AWS::Lambda::Permission - HelloLambdaPermissionApiGateway</span><br><span class="line">CloudFormation - CREATE_COMPLETE - AWS::IAM::Role - IamRoleCustomResourcesLambdaExecution</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::Lambda::Function - CustomDashresourceDashapigwDashcwDashroleLambdaFunction   </span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - AWS::Lambda::Function - CustomDashresourceDashapigwDashcwDashroleLambdaFunction   </span><br><span class="line">CloudFormation - CREATE_COMPLETE - AWS::Lambda::Function - CustomDashresourceDashapigwDashcwDashroleLambdaFunction      </span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - Custom::ApiGatewayAccountRole - CustomApiGatewayAccountCloudWatchRole</span><br><span class="line">CloudFormation - CREATE_IN_PROGRESS - Custom::ApiGatewayAccountRole - CustomApiGatewayAccountCloudWatchRole</span><br><span class="line">CloudFormation - CREATE_COMPLETE - Custom::ApiGatewayAccountRole - CustomApiGatewayAccountCloudWatchRole</span><br><span class="line">CloudFormation - UPDATE_COMPLETE_CLEANUP_IN_PROGRESS - AWS::CloudFormation::Stack - sample-dev</span><br><span class="line">CloudFormation - DELETE_SKIPPED - AWS::Lambda::Version - HelloLambdaVersionkQRfnNyzdsFOd9cvxTBAHNZoGDtQ2l6Z2hDwU58</span><br><span class="line">CloudFormation - UPDATE_COMPLETE - AWS::CloudFormation::Stack - sample-dev</span><br><span class="line">Serverless: Stack update finished...</span><br><span class="line">Service Information</span><br><span class="line">service: sample</span><br><span class="line">stage: dev</span><br><span class="line">region: us-east-1</span><br><span class="line">stack: sample-dev</span><br><span class="line">resources: 18</span><br><span class="line">api keys:</span><br><span class="line">  None</span><br><span class="line">endpoints:</span><br><span class="line">  POST - https://bmusgn5jfh.execute-api.us-east-1.amazonaws.com/dev/hello</span><br><span class="line">functions:</span><br><span class="line">  hello: sample-dev-hello</span><br><span class="line">layers:</span><br><span class="line">  None</span><br><span class="line"> </span><br><span class="line">Stack Outputs</span><br><span class="line">EnterpriseLogAccessIamRole: arn:aws:iam::271382553193:role/sample-dev-EnterpriseLogAccessIamRole-ZZR7ZNGND4U4</span><br><span class="line">HelloLambdaFunctionQualifiedArn: arn:aws:lambda:us-east-1:271382553193:function:sample-dev-hello:2</span><br><span class="line">ServiceEndpoint: https://bmusgn5jfh.execute-api.us-east-1.amazonaws.com/dev</span><br><span class="line">ServerlessDeploymentBucketName: sample-dev-serverlessdeploymentbucket-1r9jccbx0b91l</span><br><span class="line"> </span><br><span class="line">Serverless: Publishing service to the Serverless Dashboard...</span><br><span class="line">Serverless: Successfully published your service to the Serverless Dashboard: https://dashboard.serverless.com/tenants/skarlsla/applications/myapp/services/sample/stage/dev/region/us-east-1</span><br></pre></td></tr></table></figure></p><hr><p><strong>5. endpoint 호출 테스트 (path: hello , method: post)</strong></p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/endpoint.JPG" alt="-"></p><hr><p><strong>6. 모니터링</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/monitoring.jpg" alt="-"></p><hr><p><strong>7. invoke service function  호출</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">serverless invoke -f hello -l</span><br><span class="line">&#123;</span><br><span class="line">    &quot;statusCode&quot;: 200,</span><br><span class="line">    &quot;body&quot;: &quot;&#123;\n  \&quot;message\&quot;: \&quot;Go Serverless v1.0! Your function executed successfully!\&quot;,\n  \&quot;input\&quot;: &#123;&#125;\n&#125;&quot;       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr><p><strong>8. Fetch the function logs(로그 실시간보기 logtail)  서비스 호출시 로그 전송됨</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">serverless logs -f hello -t</span><br><span class="line">START RequestId: 119d14e0-0450-4095-b808-e7eca56c4fa7 Version: $LATEST</span><br><span class="line">2019-12-24 17:44:30.511 (+09:00)        119d14e0-0450-4095-b808-e7eca56c4fa7    INFO    SERVERLESS_ENTERPRISE &#123;&quot;origin&quot;:&quot;sls-agent&quot;,&quot;schemaVersion&quot;:&quot;0.0&quot;,&quot;timestamp&quot;:&quot;2019-12-24T08:44:30.511Z&quot;,&quot;requestId&quot;:&quot;119d14e0-0450-4095-b808-e7eca56c4fa7&quot;,&quot;type&quot;:&quot;transaction&quot;,&quot;payload&quot;:&#123;&quot;schemaType&quot;:&quot;s-span&quot;,&quot;schemaVersion&quot;:&quot;0.0&quot;,&quot;operationName&quot;:&quot;s-transaction-function&quot;,&quot;startTime&quot;:&quot;2019-12-24T08:44:30.508Z&quot;,&quot;endTime&quot;:&quot;2019-12-24T08:44:30.511Z&quot;,&quot;duration&quot;:2.69708,&quot;spanContext&quot;:&#123;&quot;traceId&quot;:&quot;11f9f87782a45a96c;Parent=7e64f99f36e026e6;Sampled=0&quot;&#125;,&quot;tags&quot;:&#123;&quot;schemaType&quot;:&quot;s-transaction-function&quot;,&quot;schemaVersion&quot;:&quot;0.0&quot;,&quot;timestamp&quot;:&quot;2019-12-24T08:44:30.508Z&quot;,&quot;tenantId&quot;:&quot;skarlsla&quot;,&quot;applicationName&quot;:&quot;myapp&quot;,&quot;serviceName&quot;:&quot;sample&quot;,&quot;stageName&quot;:&quot;dev&quot;,&quot;functionName&quot;:&quot;sample-dev-hello&quot;,&quot;timeout&quot;:6,&quot;computeType&quot;:&quot;aws.lambda&quot;,&quot;computeRuntime&quot;:&quot;aws.lambda.nodejs.12.13.0&quot;,&quot;computeRegion&quot;:&quot;us-east-1&quot;,&quot;computeMemorySize&quot;:&quot;1024&quot;,&quot;computeMemoryUsed&quot;:&quot;&#123;\&quot;rss\&quot;:37830656  중략...</span><br></pre></td></tr></table></figure></p><hr><p><strong>9. 서비스 삭제</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">serverless remove</span><br><span class="line">Serverless: Getting all objects in S3 bucket...</span><br><span class="line">Serverless: Removing objects in S3 bucket...</span><br><span class="line">Serverless: Removing Stack...</span><br><span class="line">Serverless: Checking Stack removal progress...</span><br><span class="line">.........................</span><br><span class="line">Serverless: Stack removal finished...</span><br><span class="line">Serverless: Publishing service to the Serverless Dashboard...</span><br><span class="line">Serverless: Successfully published your service to the Serverless Dashboard: https://dashboard.serverless.com/tenants/skarlsla/applications/myapp/services/sample/stage/dev/region/us-east-1</span><br></pre></td></tr></table></figure></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Serverless-프레임워크는-서버리스-애플리케이션을-생성하고-배포하기-위해-필요한-모든-도구들을-쉽게-관리할-수-있는-패키지-형태로-묶어서-제공한다&quot;&gt;&lt;a href=&quot;#Serverless-프레임워크는-서버리스-애플리케이션을-생성하고-
      
    
    </summary>
    
      <category term="AWS" scheme="https://skarlsla.github.io/categories/AWS/"/>
    
    
      <category term="AWS" scheme="https://skarlsla.github.io/tags/AWS/"/>
    
      <category term="SERVERLESS" scheme="https://skarlsla.github.io/tags/SERVERLESS/"/>
    
  </entry>
  
  <entry>
    <title>[AWS] SAM 간단한 예제(RESTful API endpoint using Amazon API Gateway)</title>
    <link href="https://skarlsla.github.io/2019/12/23/aws-sam-simple/"/>
    <id>https://skarlsla.github.io/2019/12/23/aws-sam-simple/</id>
    <published>2019-12-23T07:43:15.000Z</published>
    <updated>2019-12-23T08:23:51.993Z</updated>
    
    <content type="html"><![CDATA[<h3 id="SAM으로-간단한-예제"><a href="#SAM으로-간단한-예제" class="headerlink" title="SAM으로 간단한 예제"></a>SAM으로 간단한 예제</h3><p><strong>1. template.yaml 설정</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">AWSTemplateFormatVersion: &apos;2010-09-09&apos;   #SAM 템플릿</span><br><span class="line">Transform: &apos;AWS::Serverless-2016-10-31&apos;</span><br><span class="line">Description: A simple backend with a RESTful API endpoint using Amazon API Gateway.</span><br><span class="line">Resources:</span><br><span class="line">  hello:</span><br><span class="line">    Type: &apos;AWS::Serverless::Function&apos;</span><br><span class="line">    Properties:</span><br><span class="line">      Handler: handler.hello    #실행 함수</span><br><span class="line">      Runtime: nodejs8.10       #node.js 로 실행</span><br><span class="line">      CodeUri: .                #파일 path</span><br><span class="line">      Description: A simple backend with a RESTful API endpoint using Amazon API Gateway.</span><br><span class="line">      MemorySize: 512           #function 할당 메모리</span><br><span class="line">      Timeout: 10               #호출 타임아웃</span><br><span class="line">      Events:</span><br><span class="line">        Api1:</span><br><span class="line">          Type: Api             #api gateway</span><br><span class="line">          Properties:</span><br><span class="line">            Path: /hello        #API호출경로</span><br><span class="line">            Method: ANY         #모든메소드</span><br></pre></td></tr></table></figure></p><hr><p><strong>2. handler.js</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// apigateway 에서 호출시 진입점(hello)</span></span><br><span class="line">exports.hello = <span class="function">(<span class="params">event, context, callback</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//console.log('Received event:', JSON.stringify(event, null, 2));</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (event.httpMethod) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'DELETE'</span>:</span><br><span class="line">            sendResponse(<span class="number">200</span>, <span class="string">'DELETE happened'</span>, callback);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'GET'</span>:</span><br><span class="line">            sendResponse(<span class="number">200</span>, <span class="string">'GET happened'</span>, callback);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'POST'</span>:</span><br><span class="line">            sendResponse(<span class="number">200</span>, <span class="string">'POST happened'</span>, callback);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'PUT'</span>:</span><br><span class="line">            sendResponse(<span class="number">200</span>, <span class="string">'PUT happened'</span>, callback);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            sendResponse(<span class="number">200</span>, <span class="string">`Unsupported method "<span class="subst">$&#123;event.httpMethod&#125;</span>"`</span>, callback);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sendResponse</span>(<span class="params">statusCode, message, callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> response = &#123;</span><br><span class="line">        statusCode: statusCode,</span><br><span class="line">        body: <span class="built_in">JSON</span>.stringify(message)</span><br><span class="line">    &#125;;</span><br><span class="line">    callback(<span class="literal">null</span>,response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr><p><strong>3. S3 bucket 생성</strong><br>aws 설치 및 config 설정 생략…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aws s3 mb s3://sam-test-bucket3</span><br><span class="line">make_bucket: sam-test-bucket3</span><br></pre></td></tr></table></figure></p><hr><p><strong>4. Packing Artifacts</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">aws cloudformation package --template-file .\template.yml --s3-bucket sam-test-bucket3 --output-template.yaml</span><br><span class="line">Uploading to 7e7043603cb391e49a966292b19ddcf0  42386 / 42386.0  (100.00%)</span><br><span class="line">Successfully packaged artifacts and wrote output template to file packaged-template.yaml.</span><br><span class="line">Execute the following command to deploy the packaged template</span><br></pre></td></tr></table></figure></p><p>output-template.yaml 에 codeUri가 변경됨  S3의 위치로</p><hr><p><strong>5. 배포(Deploy)</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">aws cloudformation deploy --template-file .\packaged-template.yaml --stack-name sam-test-basic3 --capabilities CAPABILITY_IAM</span><br><span class="line"></span><br><span class="line">Waiting for changeset to be created..</span><br><span class="line">Waiting for stack create/update to complete</span><br><span class="line">Successfully created/updated stack - sam-test-basic3</span><br></pre></td></tr></table></figure></p><hr><p><strong>6. 생성된 cloudFormation STACK</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/1.stack.jpg" alt="-"></p><hr><p><strong>7. 생성된 STACK RESOURCE</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/2.resource.jpg" alt="-"></p><hr><p><strong>8. 생성된 Template</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/3.template.jpg" alt="-"></p><hr><p><strong>9. 생성된 API GATEWAY</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/4.apistage.jpg" alt="-"></p><hr><p><strong>10. API 호출정보 및 호출</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/5.callstage.jpg" alt="-"></p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/6.callwebsite.jpg" alt="호출"></p><hr><p><strong>11. 삭제</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aws --region us-east-2 cloudformation delete-stack --stack-name sam-test-basic3</span><br></pre></td></tr></table></figure></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;SAM으로-간단한-예제&quot;&gt;&lt;a href=&quot;#SAM으로-간단한-예제&quot; class=&quot;headerlink&quot; title=&quot;SAM으로 간단한 예제&quot;&gt;&lt;/a&gt;SAM으로 간단한 예제&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. template.yaml 설정&lt;/s
      
    
    </summary>
    
      <category term="AWS" scheme="https://skarlsla.github.io/categories/AWS/"/>
    
    
      <category term="AWS" scheme="https://skarlsla.github.io/tags/AWS/"/>
    
      <category term="SAM" scheme="https://skarlsla.github.io/tags/SAM/"/>
    
      <category term="SERVERLESS" scheme="https://skarlsla.github.io/tags/SERVERLESS/"/>
    
  </entry>
  
  <entry>
    <title>[AWS] CloudWatch Alarms to Slack(로그 에러메세지 슬랙으로 알림)</title>
    <link href="https://skarlsla.github.io/2019/12/11/cloudwatchtoslack/"/>
    <id>https://skarlsla.github.io/2019/12/11/cloudwatchtoslack/</id>
    <published>2019-12-11T08:22:15.000Z</published>
    <updated>2019-12-11T09:43:18.928Z</updated>
    
    <content type="html"><![CDATA[<h3 id="SAM"><a href="#SAM" class="headerlink" title="SAM ?"></a>SAM ?</h3><p>AWS에서 서버리스 애플리케이션을 빌드하는 데 사용할 수 있는 오픈 소스 프레임워크입니다.<br>Lambda 함수, 이벤트 소스 및 기타 리소스의 조합. </p><p>굳이 힘들게 만들지 않아도 기본적인 앱들이 많다.</p><p>그중에 cloudwatch to slack 을 이용해서 해본다.</p><p>lambda -&gt; 어플리케이션 -&gt; 검색 serverlessrepo-cloudwatch-alarm-to-slack</p><hr><h3 id="slack-incoming-webhook"><a href="#slack-incoming-webhook" class="headerlink" title="slack incoming webhook"></a>slack incoming webhook</h3><p>미리 생성</p><hr><h3 id="CloudWatch-Alarms-to-Slack"><a href="#CloudWatch-Alarms-to-Slack" class="headerlink" title="CloudWatch Alarms to Slack"></a>CloudWatch Alarms to Slack</h3><p>흐름?<br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/blueprint-flow.png" alt="흐름도"></p><p>그림상 CPU로 했지만 이번엔 특정 람다함수의 에러로그시 알람을 받아보기로함.</p><p><strong>1. SAM을 이용해서 앱 생성</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/7.samcreated.jpg" alt="SAM"></p><p><strong>2. 생성된 리소스 확인해보자</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/8.topicandfunction.jpg" alt="리소스"></p><p>SAM이 아니였다면 일일이 수작업을 해야한다.<br>SNS Topic, Role, Lambda function &amp; permission &amp; SNS연결</p><p><strong>3. Lambda이벤트소스</strong><br>이벤트 -&gt; 슬랙 메세지 전송<br>이벤트 파라미터를 통해 채널별로 별도로 전송도 가능하겠다.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">function processEvent(event, callback) &#123;</span><br><span class="line">    console.log(&quot;event&quot;);</span><br><span class="line">    const message = JSON.parse(event.Records[0].Sns.Message);</span><br><span class="line"></span><br><span class="line">    const alarmName = message.AlarmName; //event.Records[0].Sns.Message.AlarmName;</span><br><span class="line">    //var oldState = message.OldStateValue;</span><br><span class="line">    const newState = message.NewStateValue; //event.Records[0].Sns.Message.NewStateValue; </span><br><span class="line">    const reason = message.NewStateReason; //event.Records[0].Sns.Message.NewStateReason; </span><br><span class="line"></span><br><span class="line">    const slackMessage = &#123;</span><br><span class="line">        channel: slackChannel,</span><br><span class="line">        text: `$&#123;alarmName&#125; state is now $&#123;newState&#125;: $&#123;reason&#125;`</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    postMessage(slackMessage, (response) =&gt; &#123;</span><br><span class="line">        if (response.statusCode &lt; 400) &#123;</span><br><span class="line">            console.info(&apos;Message posted successfully&apos;);</span><br><span class="line">            callback(null);</span><br><span class="line">        &#125; else if (response.statusCode &lt; 500) &#123;</span><br><span class="line">            console.error(`Error posting message to Slack API: $&#123;response.statusCode&#125; - $&#123;response.statusMessage&#125;`);</span><br><span class="line">            callback(null);  // Don&apos;t retry because the error is due to a problem with the request</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // Let Lambda retry</span><br><span class="line">            callback(`Server error when processing message: $&#123;response.statusCode&#125; - $&#123;response.statusMessage&#125;`);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>4. 앱 환경변수</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/9.vari.jpg" alt="환경변수"></p><p>웹훅 url을 KMS로 암호화해서 넣어야한다.<br>알람을 받을 채널명을 입력한다.</p><p><strong>5. KMS로 암호화</strong><br>aws kms로 이동 후 kms 생성</p><p>작업PC에 aws-cli를 설치하고 sdk config를 설정한후 (key, secret, region ) </p><p>암호화 명령어(웹훅 주소는 https://는 빼고한다.)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">aws kms encrypt --key-id &quot;alias/firstKey&quot; --plaintext hooks.slack.com/services/T919NHKHQ/BRC2C9JTW/AWHkTB9tqxxxx</span><br><span class="line">&#123;</span><br><span class="line">    &quot;CiphertextBlob&quot;: &quot;AQICAHjZAWxDFIzL7Oag6zTm7iWRjsIxxxxxgEJyyQbbCYC6gzchcB1MLs6AAAApzCBpAYJKoZIhvcNAQcGoIGWMIGTAgEAMIGNBgkqhkiG9w0BBwEwHgYJYIZIAWUDBAEuMBEEDMlBSyOT7QHDEM8sLAIBEIBgFilgF7ONYEgiiiM4yxz+Iy8TkbzFlOiDoa79s4z................................+HWPErBuwGtje3bwfmoRCL1D24aosHuW8lekMJUqF0SqdlmGuxxxxx&quot;,</span><br><span class="line">    &quot;KeyId&quot;: &quot;arn:aws:kms:us-east-2:271382xxxxxx193:key/ab9a5099-01aa-46dc-b284-xxxxxx&quot;,</span><br><span class="line">    &quot;EncryptionAlgorithm&quot;: &quot;SYMMETRIC_DEFAULT&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>6. CloudWatch Alert</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/1.alarmcreate.jpg" alt="경보생성"></p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/2.jipyo.jpg" alt="지표선택"></p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/3.error.jpg" alt="지표선택오류시"></p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/4.condition.jpg" alt="조건설정"></p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/5.selectSNS.jpg" alt="연결SNS 선택"></p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/6.createdAlarm.jpg" alt="알람 생성"></p><p><strong>7. 경보호출</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/10.makeerror.jpg" alt="소스수정"></p><p>소스수정으로 hello function실행시 error로그가 발생하도록 수정</p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/11.genealert.jpg" alt="에러발생"></p><p><strong>8. 슬랙 채널 확인</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/12.slackmessage.JPG" alt="슬랙"></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;SAM&quot;&gt;&lt;a href=&quot;#SAM&quot; class=&quot;headerlink&quot; title=&quot;SAM ?&quot;&gt;&lt;/a&gt;SAM ?&lt;/h3&gt;&lt;p&gt;AWS에서 서버리스 애플리케이션을 빌드하는 데 사용할 수 있는 오픈 소스 프레임워크입니다.&lt;br&gt;Lambda 함
      
    
    </summary>
    
      <category term="AWS" scheme="https://skarlsla.github.io/categories/AWS/"/>
    
    
      <category term="AWS" scheme="https://skarlsla.github.io/tags/AWS/"/>
    
      <category term="incoming webhook" scheme="https://skarlsla.github.io/tags/incoming-webhook/"/>
    
      <category term="CloudWatch" scheme="https://skarlsla.github.io/tags/CloudWatch/"/>
    
  </entry>
  
  <entry>
    <title>[SLACK] 슬랙 메세지 알람받기(incoming webhook) 준비</title>
    <link href="https://skarlsla.github.io/2019/12/10/slackalarm/"/>
    <id>https://skarlsla.github.io/2019/12/10/slackalarm/</id>
    <published>2019-12-10T07:43:15.000Z</published>
    <updated>2019-12-10T07:00:22.096Z</updated>
    
    <content type="html"><![CDATA[<h3 id="slack"><a href="#slack" class="headerlink" title="slack ?"></a>slack ?</h3><p>슬랙(Slack)은 이 중요한 커뮤니케이션의 효율성을 높이기 위한 도구다. 슬랙의 공개 채널, 비공개 그룹, 직접 메시징 기능은 팀원들에게 각 주제에 맞는 모드로 커뮤니케이션할 수 있는 옵션을 제공한다. 보통 채널을 만들어 메신저를 기본으로 사용한다. 또한 구글,트렐로,깃헙 등을 연동 할수있다. 그외에도 수많은 앱을 연동 할수있다. </p><hr><h3 id="aws-모니터링"><a href="#aws-모니터링" class="headerlink" title="aws 모니터링"></a>aws 모니터링</h3><p>aws cloudwatch나  cloudtrail의 특정 알람을  람다를 통해 슬랙으로 보내 모니터링을 하는게 대세인 듯 하다.</p><hr><h3 id="슬랙-incoming-webhook-준비"><a href="#슬랙-incoming-webhook-준비" class="headerlink" title="슬랙  incoming webhook 준비"></a>슬랙  incoming webhook 준비</h3><p><strong>1. 가입은 패스</strong><br><strong>2. 워크스페이스 만들기</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/0.workspace1.jpg" alt="워크스페이스"></p><p><strong>3. 앱만들기</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/1.createapp.jpg" alt="앱만들기"></p><p><strong>4. 채널 만들기</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/3.createchannel.jpg" alt="채널생성"></p><p><strong>5. incoming webhook 생성</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/2.incomingwebhook.jpg" alt="incomingwebhook"><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/4.selectchannel.jpg" alt="채널선택"><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/5.completewebhook.jpg" alt="웹훅주소생성"></p><p><strong>6. 호출테스트</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/6.postman.jpg" alt="호출"></p><p><strong>7. 호출테스트</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/7.slackalarm.jpg" alt="메세지알람"></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;slack&quot;&gt;&lt;a href=&quot;#slack&quot; class=&quot;headerlink&quot; title=&quot;slack ?&quot;&gt;&lt;/a&gt;slack ?&lt;/h3&gt;&lt;p&gt;슬랙(Slack)은 이 중요한 커뮤니케이션의 효율성을 높이기 위한 도구다. 슬랙의 공개 채널, 비
      
    
    </summary>
    
      <category term="SLACK" scheme="https://skarlsla.github.io/categories/SLACK/"/>
    
    
      <category term="incoming webhook" scheme="https://skarlsla.github.io/tags/incoming-webhook/"/>
    
      <category term="SLACK" scheme="https://skarlsla.github.io/tags/SLACK/"/>
    
      <category term="slack연동" scheme="https://skarlsla.github.io/tags/slack%EC%97%B0%EB%8F%99/"/>
    
  </entry>
  
  <entry>
    <title>[해외 SMS] nexmo sms verify</title>
    <link href="https://skarlsla.github.io/2019/08/20/service-message-nexmo/"/>
    <id>https://skarlsla.github.io/2019/08/20/service-message-nexmo/</id>
    <published>2019-08-20T07:43:15.000Z</published>
    <updated>2019-08-20T07:58:22.412Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Verify-API-제공"><a href="#Verify-API-제공" class="headerlink" title="Verify API 제공"></a>Verify API 제공</h3><p>The Verify API enables you to confirm that you can contact a user at a specific number.</p><ul><li>Protect against spam, by preventing spammers from creating multiple accounts</li><li>Monitor suspicious activity, by forcing an account user to verify ownership of a number</li><li>Reach your users at any time, by ensuring that you have their correct phone number</li></ul><p>The general workflow is shown in the following sequence diagram:<br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/nexmo-verify-flow.png" alt="flow"></p><h3 id="Node-js를-사용한-테스트"><a href="#Node-js를-사용한-테스트" class="headerlink" title="Node.js를 사용한 테스트"></a>Node.js를 사용한 테스트</h3><ol><li>npm init  초기화</li><li><p>npm install nexmo</p></li><li><p>nexmo npm 선언</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Nexmo = <span class="built_in">require</span>(<span class="string">'nexmo'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nexmo = <span class="keyword">new</span> Nexmo(&#123;</span><br><span class="line">  apiKey: <span class="string">'xxxxx'</span>,</span><br><span class="line">  apiSecret: <span class="string">'xxxxx'</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>code 요청하기</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nexmo.verify.request(&#123;</span><br><span class="line">    number: <span class="string">'받을휴대번호'</span>,</span><br><span class="line">    brand: <span class="string">'Nexmo'</span>,</span><br><span class="line">    code_length: <span class="string">'4'</span></span><br><span class="line">  &#125;, (err, result) =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">      <span class="built_in">console</span>.log(result);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></li><li><p>결과확인(첫번째가 정상, 두번째는 중복발생불가)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123; request_id: &apos;dd0ffecfbab1459bba27cb8fc219cfd2&apos;, status: &apos;0&apos; &#125;</span><br><span class="line"> </span><br><span class="line"> OR</span><br><span class="line"></span><br><span class="line">&#123; request_id: &apos;dd0ffecfbab1459bba27cb8fc219cfd2&apos;,</span><br><span class="line">  status: &apos;10&apos;,</span><br><span class="line">  error_text:</span><br><span class="line">   &apos;Concurrent verifications to the same number are not allowed&apos; &#125;</span><br></pre></td></tr></table></figure></li><li><p>문자메세지 확인<br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/sms-verify.png" alt="sms"></p></li><li><p>code 확인하기(받은 request_id로 요청,문자로 받은 코드4자리)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">nexmo.verify.check(&#123;</span><br><span class="line">    request_id: <span class="string">'dd0ffecfbab1459bba27cb8fc219cfd2'</span>,</span><br><span class="line">    code: <span class="string">'0000'</span></span><br><span class="line">  &#125;, (err, result) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err ? err : result)</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></li><li><p>결과확인</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">정상</span><br><span class="line">&#123; request_id: &apos;dd0ffecfbab1459bba27cb8fc219cfd2&apos;,</span><br><span class="line">  status: &apos;0&apos;,</span><br><span class="line">  event_id: &apos;1C0000001295AD96&apos;,</span><br><span class="line">  price: &apos;0.10000000&apos;,</span><br><span class="line">  currency: &apos;EUR&apos; &#125;</span><br><span class="line"></span><br><span class="line">OR</span><br><span class="line"></span><br><span class="line">코드번호 불일치</span><br><span class="line">&#123; request_id: &apos;dd0ffecfbab1459bba27cb8fc219cfd2&apos;,</span><br><span class="line">  status: &apos;16&apos;,</span><br><span class="line">  error_text: &apos;The code provided does not match the expected value&apos; &#125;</span><br><span class="line"></span><br><span class="line">OR</span><br><span class="line"></span><br><span class="line">요청을 찾을수없음</span><br><span class="line">&#123; status: &apos;6&apos;,</span><br><span class="line">  error_text:</span><br><span class="line">   &apos;The Nexmo platform was unable to process this message for the following reason: Request \&apos;dd0ffecfbab1459bba27cb8fc219cfd2\&apos; was not found or it has been verified</span><br><span class="line">already.&apos; &#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="verify-자체개발-vs-verify-api-사용"><a href="#verify-자체개발-vs-verify-api-사용" class="headerlink" title="verify 자체개발 vs verify api 사용"></a>verify 자체개발 vs verify api 사용</h3><ul><li><p>verify 자체 개발시 난수발생(4자리,6자리) and 메모리db에 임시저장 확인시 조회 and 로그 자체기록</p></li><li><p>verify api 사용시 따로 메모리db 구축안하고 돈이 더 들어간다. 성공시 0.1 유로? 비싸다. 그냥 sms보내면 0.04유로<br>대신 분석 및 로그조회가 가능하다</p></li></ul><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/analytics.png" alt="analytics"></p><h3 id="참고사이트"><a href="#참고사이트" class="headerlink" title="참고사이트"></a>참고사이트</h3><p><a href="https://developer.nexmo.com/verify/overview" target="_blank" rel="noopener">https://developer.nexmo.com/verify/overview</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Verify-API-제공&quot;&gt;&lt;a href=&quot;#Verify-API-제공&quot; class=&quot;headerlink&quot; title=&quot;Verify API 제공&quot;&gt;&lt;/a&gt;Verify API 제공&lt;/h3&gt;&lt;p&gt;The Verify API enables you
      
    
    </summary>
    
      <category term="service" scheme="https://skarlsla.github.io/categories/service/"/>
    
    
      <category term="sms" scheme="https://skarlsla.github.io/tags/sms/"/>
    
      <category term="해외sms" scheme="https://skarlsla.github.io/tags/%ED%95%B4%EC%99%B8sms/"/>
    
      <category term="sms verify" scheme="https://skarlsla.github.io/tags/sms-verify/"/>
    
  </entry>
  
  <entry>
    <title>[SNS LOGIN] SNS 로그인시 받는 DATA분석 및 활용</title>
    <link href="https://skarlsla.github.io/2019/07/25/webserver-auth5/"/>
    <id>https://skarlsla.github.io/2019/07/25/webserver-auth5/</id>
    <published>2019-07-25T02:43:15.000Z</published>
    <updated>2019-07-30T05:34:35.757Z</updated>
    
    <content type="html"><![CDATA[<h3 id="FACEBOOK-RESPONSE-DATA"><a href="#FACEBOOK-RESPONSE-DATA" class="headerlink" title="FACEBOOK RESPONSE DATA"></a>FACEBOOK RESPONSE DATA</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;authResponse&quot;: &#123;</span><br><span class="line">    &quot;accessToken&quot;: &quot;EAAUNGBaxD3QBAN5ZAwP&quot;,</span><br><span class="line">    &quot;userID&quot;: &quot;238&quot;,</span><br><span class="line">    &quot;expiresIn&quot;: 5278,</span><br><span class="line">    &quot;signedRequest&quot;: &quot;JwLCSwZmTIr6UP82lL1CFOL24nvtAp3aYmJB7pbemjI.eyJ1c2VyX2lkIjoiMjM4OTE2Nzg5NDUwODY0NiIsImNvZGUiOiJBUUNvR1RsUENrVnpsZWd3eDNRYi05bHJmNGU5X0dKd0bXRzdHR3U1JRSVVXRlRFU1RTNUM3YkJrRWYyOGx1RTRfZm5ZRnZNemNXYnQ0dEt0VkgtbVI2ZjB6OFhweHdNZFhjamRZMlI1VHdUSHRpY05yMkU4U3o1bllkSFdvc0tFbkhFTUJ3ejdFZkhlQXg1LVcyNyIsImFsZ29yaXRobSI6IkhNQUMtU0hBMjU2IiwiaXNzdWVkX2F0IjoxNTY0MDE4MzIyfQ&quot;,</span><br><span class="line">    &quot;data_access_expiration_time&quot;: 1571794322</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;status&quot;: &quot;connected&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>status는 앱 사용자의 로그인 상태를 지정합니다. status는 다음 중 하나일 수 있습니다.</p><ul><li>connected - 사용자가 Facebook에 로그인하고 앱에 로그인했습니다.</li><li>not_authorized - 사용자가 Facebook에는 로그인했지만 앱에 로그인하지 않았습니다.</li><li>unknown - 사용자가 Facebook에 로그인하지 않았으므로 앱에 로그인했는지 알 수 없습니다. 또는 이전에 FB.logout()이 호출되었으므로 Facebook에 연결할 수 없습니다.</li><li>connected 상태인 경우 authResponse가 포함되며 다음과 같이 구성되어 있습니다.<ul><li>accessToken - 앱 사용자의 액세스 토큰이 포함되어 있습니다.</li><li>expiresIn - 토큰이 만료되어 갱신해야 하는 UNIX 시간을 표시합니다.</li><li>reauthorize_required_in - 로그인이 만료되어 재인증이 필요하기 전까지의 시간(초)입니다.</li><li>signedRequest - 앱 사용자에 대한 정보를 포함하는 서명된 매개변수입니다.</li><li>userID - 앱 사용자의 ID입니다.</li></ul></li></ul><p>connected 가 정상적으로 되었을 경우 profile (정보)조회 가능 사전 앱 설정에 따라 제한할수있고<br>요청하는 DATA를 지정  (예시로 이메일 또는 이름 등 )하여 받을 수 있음.</p><hr><h3 id="GOOGLE-RESPONSE-DATA"><a href="#GOOGLE-RESPONSE-DATA" class="headerlink" title="GOOGLE+ RESPONSE DATA"></a>GOOGLE+ RESPONSE DATA</h3><p><strong>gauth.currentUser.get().getAuthResponse()</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;token_type&quot;: &quot;Bearer&quot;,</span><br><span class="line">  &quot;login_hint&quot;: &quot;AJDL5jnuaIYokj9TBX5defwHDYlm3wwAS_3ha8RuzhYS2JNg&quot;,</span><br><span class="line">  &quot;expires_in&quot;: 3600,</span><br><span class="line">  &quot;id_token&quot;: &quot;eyJhbGciOiJSUzI1yNXFpMGFmMnZxb2tpNzVxdDlpbmtpbGNlOTVzaXUyLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwic3ViIjoiMTE1MDY1ODEwODA4OTgxMjY1NzgwIiwiZW1haWwiOiJEVMM3JMaEs4N2RXbHZsM2VmQS9zOTYtYy9waG90by5qcGciLCJnaXZlbl9uYW1lIjoi64Ko6riwIiwiZmFtaWx5X25hbWUiOiLsnKQiLCJsb2NhbGUiOiJrbyIsImlhdCI6MTU2NDAxOTA0MiwiZXhwIjoxNTY0MDIyNjQyLCJqdGkiOiI4ZDc0MWVhMTgzMzhjM2FlY2Q1OTVlYWVhNTgxMWI5MWRkYWUyM2I5In0.aKUSck0apteYWhRLKdsWs21xqICkkmWDnA9rc97UOV0l1OECy_fo5rxf8QFKzDorsbkfuY50eG5x7PjW65Wak7DujW08kOGfwh6POBCxe_pAkwSNXpNf0g8ZHefOK2RAGzOzBmp5U2Ptg6a9pPrlIMa_eb7C-RVIHTRKM48HdcCNZN8XGq4WhEoAnZ2-ZGVQnzFgMCMusQgrMzdabAwfvHpjAdKNVR9Vq7iPSTouXiWHJfbRPNnp6LEQxlrOt8GZEVK5AFxnnDIgP26y81hfwIssNHuDNlveoWvKpyk0creKwPG5dDbrVS4c0lGAV7gimz7M40spH8CimNgowZRk6Q&quot;,</span><br><span class="line">  &quot;session_state&quot;: &#123;</span><br><span class="line">    &quot;extraQueryParams&quot;: &#123;</span><br><span class="line">      &quot;authuser&quot;: &quot;0&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;first_issued_at&quot;: 1564019043142,</span><br><span class="line">  &quot;expires_at&quot;: 1564022643142,</span><br><span class="line">  &quot;idpId&quot;: &quot;google&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><strong>gauth.currentUser.get().getBasicProfile()</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> profile = auth2.currentUser.get().getBasicProfile();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'ID: '</span> + profile.getId());</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Full Name: '</span> + profile.getName());</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Given Name: '</span> + profile.getGivenName());</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Family Name: '</span> + profile.getFamilyName());</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Image URL: '</span> + profile.getImageUrl());</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Email: '</span> + profile.getEmail());</span><br></pre></td></tr></table></figure></p><hr><h3 id="간편로그인-및-간편회원가입시-활용-DATA"><a href="#간편로그인-및-간편회원가입시-활용-DATA" class="headerlink" title="간편로그인 및 간편회원가입시 활용 DATA"></a>간편로그인 및 간편회원가입시 활용 DATA</h3><p>access_token은 sns의 추가 api기능을 활용할 때 이용하게 된다.</p><p>간편로그인 및 간편회원가입시 실제 필요한 DATA는  <strong>userID + profile</strong> 정보이다.</p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/sns_db.png" alt="SNS 회원정보 연동 DB구성(스키마) 예시"></p><p><a href="https://developers.naver.com/docs/login/devguide/#4-1-1-database%EC%9D%98-%EA%B5%AC%EC%84%B1" target="_blank" rel="noopener">참고</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;FACEBOOK-RESPONSE-DATA&quot;&gt;&lt;a href=&quot;#FACEBOOK-RESPONSE-DATA&quot; class=&quot;headerlink&quot; title=&quot;FACEBOOK RESPONSE DATA&quot;&gt;&lt;/a&gt;FACEBOOK RESPONSE DA
      
    
    </summary>
    
      <category term="webserver" scheme="https://skarlsla.github.io/categories/webserver/"/>
    
    
      <category term="sns" scheme="https://skarlsla.github.io/tags/sns/"/>
    
      <category term="간편로그인" scheme="https://skarlsla.github.io/tags/%EA%B0%84%ED%8E%B8%EB%A1%9C%EA%B7%B8%EC%9D%B8/"/>
    
  </entry>
  
  <entry>
    <title>[해외 EMAIL] AWS SES vs SendGrid vs Mailgun</title>
    <link href="https://skarlsla.github.io/2019/07/23/service-email/"/>
    <id>https://skarlsla.github.io/2019/07/23/service-email/</id>
    <published>2019-07-23T08:43:15.000Z</published>
    <updated>2019-07-23T09:31:08.894Z</updated>
    
    <content type="html"><![CDATA[<h3 id="AWS-SES-vs-SendGrid-vs-Mailgun"><a href="#AWS-SES-vs-SendGrid-vs-Mailgun" class="headerlink" title="AWS SES vs SendGrid vs Mailgun"></a>AWS SES vs SendGrid vs Mailgun</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/aws-logo.png" alt="AWS"><br><strong>Amazon SES</strong> : Amazon SES ( <a href="https://aws.amazon.com/" target="_blank" rel="noopener">Amazon Simple Email Service</a> )는 신뢰할 수 있고 확장 가능한 인프라 구현으로 구축 된 비용 효율적인 전자 메일 마케팅 도구 중 하나입니다. Amazon.com에서 자체 고객 기반의 서버로 개발했습니다.  Amazon SES는 거래 전자 메일, 마케팅 전자 메일 또는 기타 유형의 최고 품질의 콘텐츠를 구독자에게 보내도록 설계되었습니다. 그 외에도 아마존 SES는 사용자가 사용하는 것에 대해서만 비용을 지불함으로써 이익을 얻으므로 최소 의무를 요구하지 않습니다.  <a href="https://easysendy.com/integrations/amazon-ses/" target="_blank" rel="noopener">Amazon ses</a> 와의 통합을 확인하십시오 .</p><h3 id="VS"><a href="#VS" class="headerlink" title="VS"></a>VS</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/SendGrid-logo.jpg" alt="sendgrid"><br><strong>SendGrid</strong> : 2009 년에 설립 된 <a href="https://sendgrid.com/" target="_blank" rel="noopener">SendGrid</a> 는 거래 전자 메일 전송 분야의 전문가입니다. 클라우드 기반 전자 메일 서비스와 관련하여 혼란을 겪었던 기간에 개발 및 도입되었습니다. 따라서 SendGrid는 성장하는 회사가 전자 메일을 보내는 것이 고통스럽고 엉망이 된 시간에 구독자 목록에 전자 메일을 보내는 것을 도왔습니다. 오늘날이 회사는 전 세계 최고의 노치 회사 중 일부를 대신하여 대량 메일을 발송할 책임이 있습니다.  SendGrid의 신뢰할 수있는 플랫폼, 도구 및 프로 서비스 팀은 개발자 확인 및 마케팅 담당자가 구매 확인,암호 재설정 지침 또는 캠페인 육성 여부에 상관없이 모든 전자 메일을 디자인, 분류, 테스트 및 성공적으로 전달할 수 있게합니다. </p><h3 id="VS-1"><a href="#VS-1" class="headerlink" title="VS"></a>VS</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/mailgun.png" alt="mailgun"><br>Mailgun은 Rackspace에서 제공하는 전자 메일 자동화 서비스입니다. 귀하의 웹 사이트 및 응용 프로그램을 통해 전송 된 전자 메일을 전송, 수신 및 추적하기위한 완벽한 클라우드 기반 전자 메일 서비스를 제공합니다. Mailgun 기능은 직관적 인 RESTful API를 통해 사용하거나 SMTP와 같은 기존 이메일 프로토콜을 사용하여 사용할 수 있습니다. Rackspace Cloud 고객은 Mailgun의 기본 계획을 통해 매달 50,000 개의 이메일을 무료로 보낼 수 있다. 2013 년 7 월부터 Rackspace는 관리 작업을 통해 클라우드 서버용 Windows 및 Linux 이미지를 미리 구성하여 SMTP를 사용하여 Mailgun을 통해 이메일을 전송합니다.</p><hr><h3 id="Features-특색-차이점"><a href="#Features-특색-차이점" class="headerlink" title="Features(특색 차이점)"></a>Features(특색 차이점)</h3><p>Mailgun, SendGrid 및 SES는 모두 공통된 기능을 제공한다. 세 가지 서비스 모두를 사용하면 유효성 검사 및 DMARC 준수에 대한 모범 사례를 사용하여 트랜잭션 전자 메일을 보내도록 도메인을 설정할 수 있다. 그러나 각 서비스에는 다른 서비스와 차별화되는 몇 가지 사항이 있다.</p><p><strong>Amazon SES</strong><br>Amazon SES의 주요 이점 중 하나는 AWS 플랫폼의 다른 서비스와 통합된다는 것입니다. EC2에서 호스팅하는 사이트에서 원활하게 사용하고, SNS (Simple Notification Service)로 사용자 정의 알림을 구성하고, Amazon Cloudwatch로 사용자 정의보고를 설정할 수 있다. 또한 응용 프로그램 (또는 WordPress 사이트)을 테스트하여 메일을 올바르게 보내고 바운스 / 불만 알림 수신을 테스트하는 데 사용할 수 있는 편리한 사서함 시뮬레이터 가 있다.</p><p>SES가 부족한 영역 중 하나는 대시 보드입니다. Cloudwatch에서 사용자 정의 보고서를 구성하거나 WP Offload SES를 사용하여 보고서를 보거나 통계를 보내지 않는 한 정보 탐색이 다소 어려울 수 있다.</p><p><strong>Mailgun</strong><br>MailGun은 전자 메일을 보내는 것 외에도 전자 메일 유효성 검사 서비스도 제공한다. 이렇게 하면 메일을 보내고있는 이메일 주소가 실제로 존재하는지 확인하고 반송 및 허위 이메일을 줄일 수있다.</p><p>이 기능의 진정한 힘은 실시간 유효성 검사를 위해 연락 양식에 통합되었을 때 실현된다. 따라서 양식을 제출하는 사용자는 잘못된 전자 메일 주소를 입력했거나 간단히 오타를 만든 경우 신속하게 알린다.</p><p><strong>SendGrid</strong><br>SendGrid는 트랜잭션 전자 메일의 모든 일반적인 기능을 갖추고 있지만 전체 전자 메일 마케팅 서비스의 추가 이점도 있다.<br>즉, 거래 전자 메일 서비스를 관리하고 동일한 대시 보드에서 마케팅 캠페인을 보낼 수 있다.</p><hr><h3 id="Pricing-가격"><a href="#Pricing-가격" class="headerlink" title="Pricing(가격)"></a>Pricing(가격)</h3><p>Amazon SES<br>Amazon은 전송 된 전자 메일 당 10 센트를 요하는 pay-as-you-go 방식을 사용한다. 고려해야 할 별도의 계층이 없기 때문에 이메일 볼륨을 기준으로 가격을 쉽게 예측할 수 있다.</p><p>한 달에 24.95 달러에 전용 IP 주소를 추가 할 수 있다. 이는이 비교에서 세 서비스 중 가장 저렴하다.</p><p>그리고 웹 사이트가 Amazon EC2에서 호스팅되는 경우 월간 처음 62,000 개의 이메일이 완전히 무료라는 점을 분명히 말할 가치가 있다. </p><p>따라서 호스팅 및 트랜잭션 전자 메일 서비스에 대해 하나의 로그인 만하는 것이 아니라 돈을 절약 할 수 있다.</p><p>비교를 위해 EC2를 사용하지 않을 경우 지불 할 것으로 기대할 수있는 몇 가지 예가 있다.</p><p>20,000 개의 이메일 - $ 2.00 / 월<br>200,000 개의 이메일 - $ 20.00 / 월<br>전용 IP - $ 24.95 / 월</p><p><strong>mailgun</strong><br>Mailgun에는 pay-as-you-go 계획과 계층 형 가격 책정이 있다. 지불 방식대로 요금제는 10,000 개의 이메일을 무료로 받고 1,000 개의 이메일 당 $ 0.50의 요금을 부과한다.</p><p>계층 형 가격 정책은 월 79 달러부터 시작하며 전용 IP 주소와 100,000 개의 전자 메일이 포함된다.</p><p>계층화 된 계획이 없다면 Mailgun의 전용 IP 주소는 Amazon SES보다 두 배 이상, 전용 IP 당 $ 59가 소요된다. 이 비교는 또한 귀하가 미국 지역을 사용하고 있다고 가정</p><p>유럽의 지역은 요금제 및 요금제에 따라 추가 요금을 부과 할 수 있다.</p><p>그리고이 기사의 앞부분에서 언급 한 이메일 검증 API는 추가 비용이 들지만,이 비교를 위해 이를 제외하고 있다.</p><p>20,000 개의 이메일 - 월 $ 5.00<br>200,000 개의 이메일 - 매월 $ 95 (당신이가는대로 지불)<br>200,000 개의 이메일 - 월 $ 139.00 (계층화 된 가격 + IP 주소 포함)<br>전용 IP - 월 $ 59.00</p><p><strong>SendGrid</strong><br>SendGrid는 처음 30 일 동안 40,000 개의 이메일을 제공하는 무료 계획부터 몇 가지 계획을 사용할 수 있다. 그 후 무료 플랜은 하루에 100 개의 이메일로 제한되어 있다.</p><p>하루에 100 개가 넘는 경우 유료 요금제 중 하나를 사용해야한다. 월간 14.95 달러에서 최대 4 만 개의 이메일을 사용할 수 있다. </p><p>한 달에 30 달러의 전용 IP 주소를 추가 할 수 있으며, 이메일 마케팅 도구를 사용하려는 경우 추가 요금이 부과.</p><p>20,000 개의 이메일 - $ 14.95 / 월<br>200,000 개의 이메일 - $ 104.95 / 월<br>전용 IP - $ 30.00 / 월</p><hr><h3 id="Final-Opinion-결론"><a href="#Final-Opinion-결론" class="headerlink" title="Final Opinion(결론)"></a>Final Opinion(결론)</h3><p>Mailgun은 많은 이메일을 보내지 않는 소규모 사이트에 월간 10,000 편의 무료 이메일을 제공 할 수있는 최선의 선택 일 수 있다. </p><p>SES는 많은 이메일을 보내거나 이미 다른 AWS 서비스 (특히 Amazon EC2)를 사용하고있는 개발자 나 사이트 소유자에게 더 의미가 있다. </p><p>또한 가장 저렴하게 이메일 서비스를 이용 할 수 있다.</p><p>SendGrid는 가격이나 서비스면에서 전반적으로 우수하고  이메일 마케팅 소프트웨어를 사용하려는 경우 훌륭한 옵션이다.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;AWS-SES-vs-SendGrid-vs-Mailgun&quot;&gt;&lt;a href=&quot;#AWS-SES-vs-SendGrid-vs-Mailgun&quot; class=&quot;headerlink&quot; title=&quot;AWS SES vs SendGrid vs Mailgun&quot;&gt;
      
    
    </summary>
    
      <category term="service" scheme="https://skarlsla.github.io/categories/service/"/>
    
    
      <category term="email api" scheme="https://skarlsla.github.io/tags/email-api/"/>
    
      <category term="해외 email" scheme="https://skarlsla.github.io/tags/%ED%95%B4%EC%99%B8-email/"/>
    
  </entry>
  
  <entry>
    <title>[해외 SMS] twilio vs nexmo</title>
    <link href="https://skarlsla.github.io/2019/07/23/service-message/"/>
    <id>https://skarlsla.github.io/2019/07/23/service-message/</id>
    <published>2019-07-23T05:43:15.000Z</published>
    <updated>2019-07-23T06:41:58.670Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Features-and-Services-기능-서비스"><a href="#Features-and-Services-기능-서비스" class="headerlink" title="Features and Services(기능 서비스)"></a>Features and Services(기능 서비스)</h3><p>Both platforms are very similar in the functions, features and services they provide users.</p><p>두 플랫폼 모두 사용자에게 제공하는 기능, 기능 및 서비스면에서 매우 유사합니다.</p><p>With Voice, SMS, and Authentication available from both Nexmo and Twilio, the key differences lie in not only the specific features included for each section, but also what functions if any the platforms include beyond these three.</p><p>Nexmo와 Twilio에서 음성, SMS 및 인증을 사용할 수있는 주요 차이점은 각 섹션에 포함 된 특정 기능뿐만 아니라이 세 가지를 넘어 플랫폼이 포함될 경우 어떤 기능이 있는지에 있습니다.</p><p>I rounded up the most relevant information provided by both Nexmo and Twilio to offer as close to a complete comparison as possible.</p><p>Nexmo와 Twilio가 제공 한 가장 관련성 높은ㅈ 정보를 가능한 한 완벽하게 비교할 수 있도록 제공했습니다.</p><h3 id="Messaging"><a href="#Messaging" class="headerlink" title="Messaging"></a>Messaging</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/messagin.png" alt="messaging"></p><p>※ 넥스모의 Free Inbound SMS  정책은 현재 유료로 바뀐것으로 보인다.</p><h3 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/auth.png" alt="auth"></p><h3 id="Pricing-가격"><a href="#Pricing-가격" class="headerlink" title="Pricing(가격)"></a>Pricing(가격)</h3><p>When it comes to the pricing of these platforms, the paradigm is different from what we have seen when comparing VoIP providers or even Team Collaboration apps. Generally, the cost of a platform is a reoccurring monthly fee based on the active users – however with Nexmo and Twilio, pricing is broken down between the phone numbers your account owns, and the incoming our out coming communications that occur. Pricing will of course differ between outbound and inbound messages, as well as between voice, SMS or authentication functions.</p><p>이러한 플랫폼의 가격 체계는  VoIP 공급자 또는 Team Collaboration 응용 프로그램을 비교할 때 보았던 것과 다릅니다. 일반적으로 플랫폼 비용은 활성 사용자를 기준으로 월별 요금이 다시 발생합니다. Nexmo 및 Twilio를 사용하면 계정에있는 전화 번호와 발생할 외부 통화에 대한 가격이 책정됩니다. 물론 발신, 수신 메시지는 물론 음성, SMS 또는 인증 기능간에 가격이 다릅니다.</p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/pricing.png" alt="pricing"></p><p>Twilio Pricing : <a href="https://www.twilio.com/sms/pricing/us" target="_blank" rel="noopener">https://www.twilio.com/sms/pricing/us</a></p><p>Nexmo Pricing : <a href="https://www.nexmo.com/pricing" target="_blank" rel="noopener">https://www.nexmo.com/pricing</a></p><p>nexmo소수점은 유로 → 달러 환전에 따른 값으로 보이고 위의 보내는 메세지는 미국 기준이지만 다른 나라도 대체로 비슷한 수준이다.</p><h3 id="Support-지원"><a href="#Support-지원" class="headerlink" title="Support(지원)"></a>Support(지원)</h3><p>Of course for any Cloud platform, support is as crucial as the user experience – if something ever goes wrong, you want to ensure help is there and that it will arrive within a reasonable window. With both Twilio and Nexmo, every account will start with standard, free yet limited, support. For a bit of a premium, users can upgrade their support to varying levels.</p><p>물론 클라우드 플랫폼의 경우 사용자 경험만큼 지원이 중요하다. 문제가 발생할 경우 도움이 있어야 하며 적절한 시간 내에 도움이 제공되도록 해야 한다. Twilio와 Nexmo 둘 다와 함께 모든 계정은 무료지만 제한된 지원으로 시작할 것이다. 약간의 프리미엄을 위해, 사용자들은 그들의 지원을 다양한 수준으로 업그레이드할 수 있다.</p><p><strong>Twilio(<a href="https://www.twilio.com/support-plans" target="_blank" rel="noopener">https://www.twilio.com/support-plans</a>)</strong></p><p>Free – Email only, no guaranteed response time<br>PRODUCTION– 4% of monthly spend (or $250 minimum), depending on Priority level - Answer in business hours(3h,6h,9h)<br>BUSINESS– 6% of monthly spend (or $1,500 minimum), depending on Priority level - Answer in business hours(1h(24/7),6h,9h), Email and phone support (24/7)<br>PERSONALIZED – 8% of monthly spend (or $5,000 minimum), depending on Priority level - Answer in business hours(1h(24/7),6h,9h), Email and phone support (24/7),Technical account manager,Support escalation line,Quarterly status review</p><p><strong>Nexmo(<a href="https://www.nexmo.com/pricing" target="_blank" rel="noopener">https://www.nexmo.com/pricing</a>)</strong></p><p>Standard–  Support via email and web<br>Priority Support– $1,500 a month for Support via chat, email, and web 24/7 escalation<br>Enterprise  - contact<br>The Bottom Line(결론)<br>At the end of the day, both Twilio and Nexmo should satisfy the majority of users and developers. Both providers offer comparable features, functions, products and service. Both providers include detailed and rich docs for developers, as well as a well thought out design and a solid user experience. Both providers include comprehensive support, and allow users the option to upgrade support for 24×7 coverage and personal engineers.</p><p>두 회사 모두 유사한 기능, 기능, 제품 및 서비스를 제공합니다. </p><p>두 회사 모두 개발자를위한 상세하고 풍부한 문서뿐만 아니라 잘 설계된 디자인과 확실한 사용자 경험을 제공합니다. </p><p>두 회사 모두 포괄적 인 지원을 제공하며 사용자가 24x7 커버리지 및 개인 엔지니어 지원을 업그레이드 할 수있는 옵션을 제공합니다.</p><p>비슷한 가격에 twilio가 더 나은 기능과 서비스를 제공하는 것 같다.</p><p>관리(console)의 편의성이나 개발(api)의  편리함이 보인다.</p><p>또한 email서비스인 sendgrid도 twilio의 서비스이다. </p><h3 id="참고사이트"><a href="#참고사이트" class="headerlink" title="참고사이트"></a>참고사이트</h3><p><a href="https://getvoip.com/blog/2017/01/05/twilio-vs-nexmo/" target="_blank" rel="noopener">https://getvoip.com/blog/2017/01/05/twilio-vs-nexmo/</a><br><a href="https://www.twiilio.com/" target="_blank" rel="noopener">https://www.twiilio.com/</a><br><a href="https://www.nexmo.com" target="_blank" rel="noopener">https://www.nexmo.com</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Features-and-Services-기능-서비스&quot;&gt;&lt;a href=&quot;#Features-and-Services-기능-서비스&quot; class=&quot;headerlink&quot; title=&quot;Features and Services(기능 서비스)&quot;&gt;&lt;/a&gt;F
      
    
    </summary>
    
      <category term="service" scheme="https://skarlsla.github.io/categories/service/"/>
    
    
      <category term="sms" scheme="https://skarlsla.github.io/tags/sms/"/>
    
      <category term="email" scheme="https://skarlsla.github.io/tags/email/"/>
    
      <category term="해외sms" scheme="https://skarlsla.github.io/tags/%ED%95%B4%EC%99%B8sms/"/>
    
  </entry>
  
  <entry>
    <title>[SNS LOGIN] sns(kakao) login with javascript</title>
    <link href="https://skarlsla.github.io/2019/07/19/webserver-auth4/"/>
    <id>https://skarlsla.github.io/2019/07/19/webserver-auth4/</id>
    <published>2019-07-19T05:43:15.000Z</published>
    <updated>2019-07-19T06:46:57.190Z</updated>
    
    <content type="html"><![CDATA[<h3 id="간편로그인"><a href="#간편로그인" class="headerlink" title="간편로그인"></a>간편로그인</h3><p>카카오에서 간편로그인으로 ios,android,javascript,restapi를 제공한다.</p><p>restapi는 앱서버에서 OAuth2.0인증에 따라 인증코드로 SNS로 조회 후 로그인(세션/토큰) 처리까지 처리했다면<br>javascript SDK를 사용하면 클라이언트에서 바로 SNS로그인 결과를 받아서 처리를 할수있다.</p><hr><h3 id="javascript-로-kakao-login"><a href="#javascript-로-kakao-login" class="headerlink" title="javascript 로 kakao login"></a>javascript 로 kakao login</h3><ol><li><p><a href="https://developers.kakao.com" target="_blank" rel="noopener">https://developers.kakao.com</a> 회원가입 &amp; 로그인</p></li><li><p>앱만들기 &amp; 플랫폼 사이트 추가<br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/app_creI.jpg" alt="사이트 추가"></p></li><li><p>사용자관리 &amp; 등록<br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/user.jpg" alt="사용자관리"></p></li><li><p>개인정보 동의<br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/agree.jpg" alt="사용자관리"></p></li><li><p>javascript 코드 with html</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"utf-8"</span> /&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">"X-UA-Compatible"</span> content=<span class="string">"IE=edge"</span> /&gt;</span><br><span class="line">    &lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width"</span> /&gt;</span><br><span class="line">    &lt;title&gt;Login Demo - Kakao JavaScript SDK&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script src="/</span><span class="regexp">/developers.kakao.com/</span>sdk/js/kakao.min.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">    &lt;a id="</span>kakao-login-btn<span class="string">"&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href="</span>http:<span class="comment">//developers.kakao.com/logout"&gt;&lt;/a&gt;</span></span><br><span class="line">    &lt;script type=<span class="string">'text/javascript'</span>&gt;</span><br><span class="line">        <span class="comment">//&lt;![CDATA[</span></span><br><span class="line">        <span class="comment">// 사용할 앱의 JavaScript 키를 설정해 주세요.</span></span><br><span class="line">        Kakao.init(<span class="string">'javascript key 입력'</span>);</span><br><span class="line">        <span class="comment">// 카카오 로그인 버튼을 생성합니다.</span></span><br><span class="line">        Kakao.Auth.createLoginButton(&#123;</span><br><span class="line">            container: <span class="string">'#kakao-login-btn'</span>,</span><br><span class="line">            success: <span class="function"><span class="keyword">function</span> (<span class="params">authObj</span>) </span>&#123;</span><br><span class="line">                alert(<span class="built_in">JSON</span>.stringify(authObj));</span><br><span class="line">            &#125;,</span><br><span class="line">            fail: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">                alert(<span class="built_in">JSON</span>.stringify(err));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      <span class="comment">//]]&gt;</span></span><br><span class="line">    &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>node 환경은 생략</p></li><li><p>node.js로 간편하게 실행하기(npm은 express,body-parser,cookie-parser,multer 설치)</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   res.sendfile(<span class="string">'./index.html'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8000</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> host = server.address().address</span><br><span class="line">   <span class="keyword">var</span> port = server.address().port</span><br><span class="line">   </span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">"Example app listening at http://%s:%s"</span>, host, port)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>server.js</p><ol start="7"><li><p>실행 node server.js</p></li><li><p>localhost:8000 접속<br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/kakao_agree.jpg" alt="사용자관리"></p></li><li><p>로그인창<br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/kakao_login.png" alt="로그인"></p></li><li><p>결과내용<br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/kakao_return.jpg" alt="결과내용"></p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;간편로그인&quot;&gt;&lt;a href=&quot;#간편로그인&quot; class=&quot;headerlink&quot; title=&quot;간편로그인&quot;&gt;&lt;/a&gt;간편로그인&lt;/h3&gt;&lt;p&gt;카카오에서 간편로그인으로 ios,android,javascript,restapi를 제공한다.&lt;/p&gt;
&lt;p
      
    
    </summary>
    
      <category term="webserver" scheme="https://skarlsla.github.io/categories/webserver/"/>
    
    
      <category term="sns" scheme="https://skarlsla.github.io/tags/sns/"/>
    
      <category term="간편로그인" scheme="https://skarlsla.github.io/tags/%EA%B0%84%ED%8E%B8%EB%A1%9C%EA%B7%B8%EC%9D%B8/"/>
    
  </entry>
  
  <entry>
    <title>[WEBSERVER] sns login (oauth2)</title>
    <link href="https://skarlsla.github.io/2019/07/18/webserver-auth3/"/>
    <id>https://skarlsla.github.io/2019/07/18/webserver-auth3/</id>
    <published>2019-07-18T02:43:15.000Z</published>
    <updated>2019-07-18T02:30:12.434Z</updated>
    
    <content type="html"><![CDATA[<h3 id="SNS-LOGIN"><a href="#SNS-LOGIN" class="headerlink" title="SNS LOGIN"></a>SNS LOGIN</h3><p><strong>간편로그인</strong><br>웹 또는 앱서비스에 간편로그인은 기본으로 장착되는 추세이다.</p><p>SNS 로그인을 이용하기전 기반 기술을 정리해본다.</p><h3 id="OAuth2-0"><a href="#OAuth2-0" class="headerlink" title="OAuth2.0"></a>OAuth2.0</h3><p>OAuth는 3rd party(외부서비스) 인증 과 허가를 위한 표준 프로토콜이다.<br>IT기업에서 OPEN API를 제공할때 oauth를 사용하여 서비스한다.<br>대표적으로 페이스북,구글,네이버,다음카카오 등이 있겠다.<br>공통적으로 각 회사 개발자지원센터에서 가입 후 앱 혹은 웹을 만들어서 개발키를 부여받게되고<br>개발키를 사용하여 각 회사가 정의한 API사용법에 따라 인증 후 AccessToken을 발급받아 API 들을 사용 할 수있게된다.</p><hr><p><strong>권한 흐름</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/oauth.png" alt="oauth2.0"></p><ol><li>Resouce Owner(API제공업체) 인증코드 요청</li><li>요청성공시 인증코드(Authrization Grant) 전달</li><li>인증코드로 Authorization Server에 토큰요청(AccessToken)</li><li>유효한 인증코드일때 토큰전달</li><li>토큰으로 리소스 요청</li><li>토큰이 유효한 경우 리소스 전달</li></ol><hr><p><strong>특징</strong></p><ol><li>Oauth1.0에서는 앱에서의 사용이 어려웠다.</li><li>1.0의 복잡한 구현과 흐름을 간소화 하였다.</li><li>별도의 암호처리 없이 HTTPS를 이용한다.</li><li>HMAC를 사용하지 않는다.</li><li>AccessToken 유효시간을 지정할수있다.</li></ol><hr><h3 id="SNS-로그인"><a href="#SNS-로그인" class="headerlink" title="SNS 로그인?"></a>SNS 로그인?</h3><p>SNS로그인은  Oauth2.0의 흐름에 서버인증을 추가하면 된다.</p><p><strong>로그인 Flow</strong><br><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/snslogin.PNG" alt="sns login"></p><ol><li>사용자가 간편로그인을 요청</li><li>해당 sns 로그인 페이지 리다이렉트</li><li>등록된 url로 코드전달</li><li>전달된 권한코드 검증 </li><li>검증성공시 토큰 및 프로파일 제공</li><li>해당 정보로 회원정보 인증처리</li><li>세션 또는 토큰기반으로 인증처리</li><li>로그인 성공</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;SNS-LOGIN&quot;&gt;&lt;a href=&quot;#SNS-LOGIN&quot; class=&quot;headerlink&quot; title=&quot;SNS LOGIN&quot;&gt;&lt;/a&gt;SNS LOGIN&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;간편로그인&lt;/strong&gt;&lt;br&gt;웹 또는 앱서비스에 간편로그인
      
    
    </summary>
    
      <category term="webserver" scheme="https://skarlsla.github.io/categories/webserver/"/>
    
    
      <category term="oauth" scheme="https://skarlsla.github.io/tags/oauth/"/>
    
      <category term="sns" scheme="https://skarlsla.github.io/tags/sns/"/>
    
      <category term="간편로그인" scheme="https://skarlsla.github.io/tags/%EA%B0%84%ED%8E%B8%EB%A1%9C%EA%B7%B8%EC%9D%B8/"/>
    
  </entry>
  
  <entry>
    <title>[WEBSERVER] JWT(JSON WEB TOKEN)? </title>
    <link href="https://skarlsla.github.io/2019/07/17/webserver-auth2/"/>
    <id>https://skarlsla.github.io/2019/07/17/webserver-auth2/</id>
    <published>2019-07-17T08:43:11.000Z</published>
    <updated>2019-07-17T09:06:46.825Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="JWT-JSON-Web-Token"><a href="#JWT-JSON-Web-Token" class="headerlink" title="JWT(JSON Web Token)?"></a>JWT(JSON Web Token)?</h3><p>JSON형식으로 웹에서 사용하는 토큰? JSON 객체로서 당사자간에 안전하게 정보를 전송할 수있는 작고<br>독립적 인 방법을 정의하는 공개 표준 ( RFC 7519 )이라고 한다.  </p><p><strong>사용?</strong><br>토큰기반인증에 사용하거나 안전한 정보교환이 필요할때 유용하다고 한다.</p><p><strong>구조?</strong><br>.을 구분자로 3가지의 문자열로 되어있다. 헤더(header).내용(payload).서명(signature)</p><p><strong>헤더:</strong><br>{<br>  “typ”: “JWT”,  // 토큰타입<br>  “alg”: “HS256” // 해싱 알고리즘정보<br>}</p><p><strong>내용:</strong><br>정보의 한 ‘조각’ 을 클레임이라고 한다.클레임은 사용자에 대한 프로퍼티나 속성을 넣는다.<br>registered, public, private claims으로 구분한다.</p><p>registered claim<br>미리 정의된 claim으로써, 토큰에 대한 정보이다. </p><p>public claim<br>공개적인 claim을 명시하는데, 충돌 방지를 위해 URI 형식으로 작성한다. </p><p>private claim<br>서버와 클라이언트가 협의한 claim을 명시한다.<br>이미 정해져 있는 이름을 가진 아래의 7개에 대한 정보를 담을 수 있다. </p><p>iss : Token 발행자(Issuer)<br>sub : Token의 제목 (Subject)<br>aud : Token 의 대상자 (Audience)<br>exp : Token의 유효한 날짜 정보(Expiration time)<br>nbf : Token 의 유효 시작 날짜 정보 (Not before)<br>iat : Token의 발행된 날짜 정보(Issued At)<br>jti : Token 의 고유 식별자(JWT ID) </p><p>Claim을 JSON 행태로 정의한다.</p><p>예시:<br>{<br>  “userId”:”skarl”,<br>  “exp”: “1485270000000”,<br>  “role”:[“admin”]<br>}<br>사용시에는 BASE64 인코딩을 통해서 문자열로 변환한다.</p><p><strong>서명:</strong><br>서명은 헤더의 인코딩값과, 정보의 인코딩값을 합친후 주어진 비밀키로 해쉬를 하여 생성한다.</p><p>서명을 만드는 수도코드 구조<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HMACSHA256(</span><br><span class="line">  base64UrlEncode(header) + &quot;.&quot; +</span><br><span class="line">  base64UrlEncode(payload),</span><br><span class="line">  &quot;kkkkmysecret&quot;)</span><br></pre></td></tr></table></figure></p><p>해쉬 -&gt; base64로 인코딩 후 사용</p><p>like this<br>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJza2FybCIsImV4cCI6IjE0ODUyNzAwMDAwMDAiLCJyb2xlIjpbImFkbWluIl19.jAafdBOQCoZkV-xMcJx0BCTH45AqYtf9mcdKog4ewjc</p><p><strong>example</strong><br><a href="https://jwt.io/" target="_blank" rel="noopener">https://jwt.io/</a> 공식 홈페이지에서 테스트 해볼 수 있다.</p><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/JWT.PNG" alt="공홈 테스트"></p><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;h3 id=&quot;JWT-JSON-Web-Token&quot;&gt;&lt;a href=&quot;#JWT-JSON-Web-Token&quot; class=&quot;headerlink&quot; title=&quot;JWT(JSON Web Token)?&quot;&gt;&lt;/a&gt;JWT(JSON Web Token)?&lt;/h3&gt;
      
    
    </summary>
    
      <category term="webserver" scheme="https://skarlsla.github.io/categories/webserver/"/>
    
    
      <category term="oauth" scheme="https://skarlsla.github.io/tags/oauth/"/>
    
      <category term="jwt" scheme="https://skarlsla.github.io/tags/jwt/"/>
    
      <category term="인증" scheme="https://skarlsla.github.io/tags/%EC%9D%B8%EC%A6%9D/"/>
    
  </entry>
  
  <entry>
    <title>[WEBSERVER] session/cookie or token</title>
    <link href="https://skarlsla.github.io/2019/07/17/webserver-auth/"/>
    <id>https://skarlsla.github.io/2019/07/17/webserver-auth/</id>
    <published>2019-07-17T07:43:15.000Z</published>
    <updated>2019-07-18T01:24:48.854Z</updated>
    
    <content type="html"><![CDATA[<h3 id="인증방식"><a href="#인증방식" class="headerlink" title="인증방식"></a>인증방식</h3><p><strong>1. 서버기반</strong><br>HTTP프로토콜을 기반으로하는 통신에서 client가 요청시 한번 response후에는 특별한 처리를 하지 않는이상<br>접속을 끊는다.  만약 최초 로그인을 했다고 하더라고 그후에 요청시 client의 정보는 없다는 것이다.<br>그래서 서버에서 세션을 만들어주고 쿠키를 사용하여 문제를 해결한다.</p><p>로그인 -&gt; 서버에서 session-id 생성 전달 -&gt; client sessionId 쿠키에 저장 후 사용 </p><p><strong>장단점</strong><br>일반적인 웹서비스에서 많이 쓰이는 인증방식이다. 쿠키자체에 주요정보가 있지 않아 안전한편<br>서버에서 세션및쿠키를 관리하기때문에 사용자가 많아지면 확장이 필요하다.<br>확장을 위해 메모리DB등을 사용해야한다.</p><hr><h3 id="세션기반-흐름"><a href="#세션기반-흐름" class="headerlink" title="세션기반 흐름"></a>세션기반 흐름</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/session-seq.PNG" alt="시퀀스 다이어~"></p><hr><p><strong>2. 토큰기반</strong><br>서버에서 발행한 토큰을 이용해 인증처리를 한다.</p><p>요청시 헤더에 토큰값을 보내면 서버에서 토큰검증만 하면된다.</p><p>로그인 -&gt; 서버에서 로긴처리후 token발급 -&gt; client에서 요청시 헤더에 token</p><p><strong>장단점</strong><br>확장을 위한 메모리DB등을 사용할 필요없다.<br>쿠키로 인한 사이트간 요청위조를 방지 할수있다.<br>도메인 상관없이 토큰으로 인증<br>토큰 탈취시 보안에 취약 하지만 refresh_token과 access_token의 주기 설정으로 어느정도 방어가능</p><hr><h3 id="토큰기반-흐름"><a href="#토큰기반-흐름" class="headerlink" title="토큰기반 흐름"></a>토큰기반 흐름</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/jwt-seq.PNG" alt="시퀀스 다이어~"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;인증방식&quot;&gt;&lt;a href=&quot;#인증방식&quot; class=&quot;headerlink&quot; title=&quot;인증방식&quot;&gt;&lt;/a&gt;인증방식&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;1. 서버기반&lt;/strong&gt;&lt;br&gt;HTTP프로토콜을 기반으로하는 통신에서 client가 요청시 
      
    
    </summary>
    
      <category term="webserver" scheme="https://skarlsla.github.io/categories/webserver/"/>
    
    
      <category term="oauth" scheme="https://skarlsla.github.io/tags/oauth/"/>
    
      <category term="jwt" scheme="https://skarlsla.github.io/tags/jwt/"/>
    
      <category term="인증" scheme="https://skarlsla.github.io/tags/%EC%9D%B8%EC%A6%9D/"/>
    
      <category term="session" scheme="https://skarlsla.github.io/tags/session/"/>
    
  </entry>
  
  <entry>
    <title>[JENKINS] pipeline 작성 </title>
    <link href="https://skarlsla.github.io/2019/07/11/jenkins-pipeline/"/>
    <id>https://skarlsla.github.io/2019/07/11/jenkins-pipeline/</id>
    <published>2019-07-11T10:11:03.000Z</published>
    <updated>2019-07-11T10:25:27.915Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="git-lab-설정에서-webhook-push-Event-이후-작성-정의-pipeline"><a href="#git-lab-설정에서-webhook-push-Event-이후-작성-정의-pipeline" class="headerlink" title="git lab 설정에서 webhook (push Event) 이후 작성 정의(pipeline)"></a>git lab 설정에서 webhook (push Event) 이후 작성 정의(pipeline)</h3><p>pipeline script</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">pipeline</span> <span class="string">&#123;</span></span><br><span class="line">  <span class="string">agent</span> <span class="string">any</span></span><br><span class="line">     </span><br><span class="line">  <span class="string">tools</span> <span class="string">&#123;nodejs</span> <span class="string">"node"</span><span class="string">&#125;</span></span><br><span class="line">     </span><br><span class="line">  <span class="string">stages</span> <span class="string">&#123;</span>       </span><br><span class="line">    <span class="string">stage('Cloning</span> <span class="string">Git')</span> <span class="string">&#123;</span></span><br><span class="line">      <span class="string">steps</span> <span class="string">&#123;</span></span><br><span class="line">        <span class="string">git</span> <span class="attr">url:</span> <span class="string">'https://xxx.xxxxx.com/bittorage/WebServer.git'</span><span class="string">,</span></span><br><span class="line"><span class="attr">        credentialsId:</span> <span class="string">'gitlab-skarl-passwd'</span><span class="string">,</span></span><br><span class="line"><span class="attr">        branch:</span> <span class="string">'develop'</span></span><br><span class="line">      <span class="string">&#125;</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">         </span><br><span class="line">    <span class="string">stage('Install</span> <span class="string">dependencies')</span> <span class="string">&#123;</span></span><br><span class="line">      <span class="string">steps</span> <span class="string">&#123;</span></span><br><span class="line">        <span class="string">sh</span> <span class="string">'npm install'</span></span><br><span class="line">      <span class="string">&#125;</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line">     </span><br><span class="line">    <span class="string">stage('Test')</span> <span class="string">&#123;</span></span><br><span class="line">      <span class="string">steps</span> <span class="string">&#123;</span></span><br><span class="line">         <span class="string">sh</span> <span class="string">'npm test'</span></span><br><span class="line">      <span class="string">&#125;</span></span><br><span class="line">    <span class="string">&#125;</span>  </span><br><span class="line">  <span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><hr><h3 id="실행"><a href="#실행" class="headerlink" title="실행"></a>실행</h3><p><img src="https://raw.githubusercontent.com/skarlsla/skarlsla.github.io/master/css/image/pipeline.png" alt="실행"></p><h3 id="로그"><a href="#로그" class="headerlink" title="로그"></a>로그</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">Started by GitLab push by </span><br><span class="line">Running in Durability level: MAX_SURVIVABILITY</span><br><span class="line">[Pipeline] Start of Pipeline</span><br><span class="line">[Pipeline] node</span><br><span class="line">Running on Jenkins in /var/lib/jenkins/workspace/pipe1</span><br><span class="line">[Pipeline] &#123;</span><br><span class="line">[Pipeline] stage</span><br><span class="line">[Pipeline] &#123; (Declarative: Tool Install)</span><br><span class="line">[Pipeline] tool</span><br><span class="line">[Pipeline] envVarsForTool</span><br><span class="line">[Pipeline] &#125;</span><br><span class="line">[Pipeline] // stage</span><br><span class="line">[Pipeline] withEnv</span><br><span class="line">[Pipeline] &#123;</span><br><span class="line">[Pipeline] stage</span><br><span class="line">[Pipeline] &#123; (Cloning Git)</span><br><span class="line">[Pipeline] tool</span><br><span class="line">[Pipeline] envVarsForTool</span><br><span class="line">[Pipeline] withEnv</span><br><span class="line">[Pipeline] &#123;</span><br><span class="line">[Pipeline] git</span><br><span class="line">using credential gitlab-skarl-passwd</span><br><span class="line"> &gt; git rev-parse --is-inside-work-tree # timeout=10</span><br><span class="line">Fetching changes from the remote Git repository</span><br><span class="line"> &gt; git config remote.origin.url https://xxx.xxxxxxx.com/bittorage/WebServer.git # timeout=10</span><br><span class="line">Fetching upstream changes from https://xxx.xxxxxxx.com/bittorage/WebServer.git</span><br><span class="line"> &gt; git --version # timeout=10</span><br><span class="line">using GIT_ASKPASS to set credentials gitlab-skarl-passwd</span><br><span class="line"> &gt; git fetch --tags --progress https://xxx.xxxxxxx.com/bittorage/WebServer.git +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">skipping resolution of commit remotes/origin/develop, since it originates from another repository</span><br><span class="line"> &gt; git rev-parse refs/remotes/origin/develop^&#123;commit&#125; # timeout=10</span><br><span class="line"> &gt; git rev-parse refs/remotes/origin/origin/develop^&#123;commit&#125; # timeout=10</span><br><span class="line">Checking out Revision 449b52612009786e6e7ae37841f57b3602fc89ff (refs/remotes/origin/develop)</span><br><span class="line"> &gt; git config core.sparsecheckout # timeout=10</span><br><span class="line"> &gt; git checkout -f 449b52612009786e6e7ae37841f57b3602fc89ff</span><br><span class="line"> &gt; git branch -a -v --no-abbrev # timeout=10</span><br><span class="line"> &gt; git branch -D develop # timeout=10</span><br><span class="line"> &gt; git checkout -b develop 449b52612009786e6e7ae37841f57b3602fc89ff</span><br><span class="line">Commit message: &quot;모카 테스트 예제  추가&quot;</span><br><span class="line"> &gt; git rev-list --no-walk a7271488613cc3aeb66bd06be08603e458a57c40 # timeout=10</span><br><span class="line">[Pipeline] &#125;</span><br><span class="line">[Pipeline] // withEnv</span><br><span class="line">[Pipeline] &#125;</span><br><span class="line">[Pipeline] // stage</span><br><span class="line">[Pipeline] stage</span><br><span class="line">[Pipeline] &#123; (Install dependencies)</span><br><span class="line">[Pipeline] tool</span><br><span class="line">[Pipeline] envVarsForTool</span><br><span class="line">[Pipeline] withEnv</span><br><span class="line">[Pipeline] &#123;</span><br><span class="line">[Pipeline] sh</span><br><span class="line">+ npm install</span><br><span class="line">npm WARN webserver@0.1.0 No repository field.</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.6 (node_modules/fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.6: wanted &#123;&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;&#125; (current: &#123;&quot;os&quot;:&quot;linux&quot;,&quot;arch&quot;:&quot;x64&quot;&#125;)</span><br><span class="line"> </span><br><span class="line">audited 17564 packages in 18.837s</span><br><span class="line">found 7 vulnerabilities (1 moderate, 6 high)</span><br><span class="line">  run `npm audit fix` to fix them, or `npm audit` for details</span><br><span class="line">[Pipeline] &#125;</span><br><span class="line">[Pipeline] // withEnv</span><br><span class="line">[Pipeline] &#125;</span><br><span class="line">[Pipeline] // stage</span><br><span class="line">[Pipeline] stage</span><br><span class="line">[Pipeline] &#123; (Test)</span><br><span class="line">[Pipeline] tool</span><br><span class="line">[Pipeline] envVarsForTool</span><br><span class="line">[Pipeline] withEnv</span><br><span class="line">[Pipeline] &#123;</span><br><span class="line">[Pipeline] sh</span><br><span class="line">+ npm test</span><br><span class="line"> </span><br><span class="line">&gt; webserver@0.1.0 test /var/lib/jenkins/workspace/pipe1</span><br><span class="line">&gt; mocha ./test/Websocket.test.ts --exit</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  Sample route</span><br><span class="line">Server is running in process 11973 listening on PORT 1344</span><br><span class="line"> </span><br><span class="line">Parsing session from request...</span><br><span class="line">no passport</span><br><span class="line">JHnljEKqdbSt48woI0AdXGC6IAZZnU91</span><br><span class="line">open</span><br><span class="line">undefined</span><br><span class="line">&#123;&quot;trCode&quot;:42,&quot;message&quot;: &#123;&#125; &#125;</span><br><span class="line">code= &#123; trCode: 42, message: &#123;&#125; &#125;</span><br><span class="line">setStorageSock</span><br><span class="line">2019-04-24 10:53:00,528 INFO [STORAGE:NOTICE:CONTROLLER] StorageNoticeController init</span><br><span class="line">faq key= 42</span><br><span class="line">msg Cannot read property &apos;publish&apos; of undefined</span><br><span class="line">key=== 42</span><br><span class="line">&#123; networkType: 0,</span><br><span class="line">  trCode: 42,</span><br><span class="line">  result: 0,</span><br><span class="line">  message:</span><br><span class="line">   [ &#123; createDate: null, lastModifiedDate: null &#125;] &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    ✓ STORAGE Test (104ms)</span><br><span class="line">after</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  1 passing (191ms)</span><br><span class="line"> </span><br><span class="line">[Pipeline] &#125;</span><br><span class="line">[Pipeline] // withEnv</span><br><span class="line">[Pipeline] &#125;</span><br><span class="line">[Pipeline] // stage</span><br><span class="line">[Pipeline] &#125;</span><br><span class="line">[Pipeline] // withEnv</span><br><span class="line">[Pipeline] &#125;</span><br><span class="line">[Pipeline] // node</span><br><span class="line">[Pipeline] End of Pipeline</span><br><span class="line">Triggering a new build of ansible-project #2</span><br><span class="line">Finished: SUCCESS</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;hr&gt;
&lt;h3 id=&quot;git-lab-설정에서-webhook-push-Event-이후-작성-정의-pipeline&quot;&gt;&lt;a href=&quot;#git-lab-설정에서-webhook-push-Event-이후-작성-정의-pipeline&quot; class=&quot;headerli
      
    
    </summary>
    
      <category term="DevOps" scheme="https://skarlsla.github.io/categories/DevOps/"/>
    
    
      <category term="jenkins" scheme="https://skarlsla.github.io/tags/jenkins/"/>
    
      <category term="pipeline" scheme="https://skarlsla.github.io/tags/pipeline/"/>
    
  </entry>
  
  <entry>
    <title>[NODEJS] EXPRESS(node.js) to WebSocket 세션 공유</title>
    <link href="https://skarlsla.github.io/2019/07/11/node-express-ws/"/>
    <id>https://skarlsla.github.io/2019/07/11/node-express-ws/</id>
    <published>2019-07-11T08:30:30.000Z</published>
    <updated>2019-07-11T08:22:24.310Z</updated>
    
    <content type="html"><![CDATA[<h3 id="EXPRESS-node-js-to-WebSocket-세션-공유"><a href="#EXPRESS-node-js-to-WebSocket-세션-공유" class="headerlink" title="EXPRESS(node.js) to WebSocket 세션 공유"></a>EXPRESS(node.js) to WebSocket 세션 공유</h3><p>Express로 웹서버 생성 후  서버 및 세션정보를 WebSocket으로 전달<br>WebSocket 서버 생성 시 verifyClient 옵션으로 세션 처리</p><p><strong>server.ts</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bodyParser <span class="keyword">from</span> <span class="string">"body-parser"</span>;</span><br><span class="line"><span class="keyword">import</span> cors <span class="keyword">from</span> <span class="string">"cors"</span>;</span><br><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">"express"</span>;</span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">"http"</span>;</span><br><span class="line"><span class="keyword">import</span> methodOverride <span class="keyword">from</span> <span class="string">"method-override"</span>;</span><br><span class="line"><span class="keyword">import</span> morgan <span class="keyword">from</span> <span class="string">"morgan"</span>;</span><br><span class="line"><span class="keyword">import</span> session <span class="keyword">from</span> <span class="string">"express-session"</span>;</span><br><span class="line"><span class="keyword">import</span> passport <span class="keyword">from</span> <span class="string">"passport"</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">"path"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; WS &#125; <span class="keyword">from</span> <span class="string">"./app/ws"</span>;</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line">    <span class="comment">/* private static ConnectDB(): Promise&lt;any&gt; &#123;</span></span><br><span class="line"><span class="comment">        return Connection;</span></span><br><span class="line"><span class="comment">    &#125; */</span></span><br><span class="line">    private readonly app: express.Application;</span><br><span class="line">    private readonly server: http.Server;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.app = express();</span><br><span class="line">        <span class="keyword">this</span>.server = http.createServer(<span class="keyword">this</span>.app);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"> .</span><br><span class="line"> .</span><br><span class="line"> .</span><br><span class="line"> </span><br><span class="line">    private ExpressConfiguration(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="comment">// const RedisStore = connectRedis(session);</span></span><br><span class="line">        <span class="keyword">const</span> cookieOptions = &#123;</span><br><span class="line">            maxAge: <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>,</span><br><span class="line">            <span class="comment">// secure:true, 브라우저가 HTTPS를 통해서만 쿠키를 전송하도록 합니다.</span></span><br><span class="line">            httpOnly: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// 쿠키가 클라이언트 JavaScript가 아닌 HTTP(S)를 통해서만 전송되도록 하며, 이를 통해 XSS(Cross-site scripting) 공격으로부터 보호할 수 있습니다.</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">const</span> sessionInfo = &#123;</span><br><span class="line">            secret: <span class="string">"sec"</span>,</span><br><span class="line">            resave: <span class="literal">true</span>,</span><br><span class="line">            saveUninitialized: <span class="literal">true</span>,</span><br><span class="line">            cookie: cookieOptions,</span><br><span class="line">            <span class="comment">// store: new RedisStore(config.REDIS_OPTS),</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">this</span>.sessionOptions = session(sessionInfo);</span><br><span class="line">        <span class="keyword">this</span>.app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>: <span class="literal">true</span>&#125;));</span><br><span class="line">        <span class="keyword">this</span>.app.use(bodyParser.json(&#123;<span class="attr">limit</span>: <span class="string">"50mb"</span>&#125;));</span><br><span class="line">        <span class="keyword">this</span>.app.use(<span class="keyword">this</span>.sessionOptions);</span><br><span class="line">        <span class="comment">/* this.app.use(session(</span></span><br><span class="line"><span class="comment">            &#123;</span></span><br><span class="line"><span class="comment">                resave: true,</span></span><br><span class="line"><span class="comment">                saveUninitialized: true,</span></span><br><span class="line"><span class="comment">                secret: config.SECRET,</span></span><br><span class="line"><span class="comment">                store: new RedisStore(config.REDIS_OPTS),</span></span><br><span class="line"><span class="comment">            &#125;,</span></span><br><span class="line"><span class="comment">        )); */</span></span><br><span class="line">        <span class="keyword">this</span>.app.use(passport.initialize());</span><br><span class="line">        <span class="keyword">this</span>.app.use(passport.session());</span><br><span class="line">        <span class="keyword">this</span>.app.use(methodOverride());</span><br><span class="line">        <span class="comment">// const viewpath = path.join(__dirname, "../views");</span></span><br><span class="line">        <span class="comment">// serverService.debug(viewpath);</span></span><br><span class="line">        <span class="comment">// this.app.set("views", "./views");</span></span><br><span class="line">        <span class="keyword">this</span>.app.set(<span class="string">'views'</span>, path.join(__dirname, <span class="string">'views'</span>));</span><br><span class="line">        <span class="keyword">this</span>.app.set(<span class="string">"view engine"</span>, <span class="string">"ejs"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.app.use((req, res, next): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">            res.header(<span class="string">"Access-Control-Allow-Origin"</span>, <span class="string">"*"</span>);</span><br><span class="line">            res.header(<span class="string">"Access-Control-Allow-Headers"</span>, <span class="string">"X-Requested-With, Content-Type, Authorization"</span>);</span><br><span class="line">            res.header(<span class="string">"Access-Control-Allow-Methods"</span>, <span class="string">"GET,PUT,PATCH,POST,DELETE,OPTIONS"</span>);</span><br><span class="line">            next();</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.app.use(morgan(<span class="string">"combined"</span>));</span><br><span class="line">        <span class="keyword">this</span>.app.use(cors());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.app.use((err: any, <span class="attr">req</span>: express.Request, <span class="attr">res</span>: express.Response, <span class="attr">next</span>: express.NextFunction): <span class="function"><span class="params">void</span> =&gt;</span> &#123;</span><br><span class="line">            err.status = <span class="number">404</span>;</span><br><span class="line">            next(err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private setWebSocket(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.ws = <span class="keyword">new</span> WS(<span class="keyword">this</span>.server, <span class="keyword">this</span>.sessionOptions);</span><br><span class="line">    &#125;       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ws.ts</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> WebSocket <span class="keyword">from</span> <span class="string">'ws'</span>;</span><br><span class="line"><span class="keyword">import</span> express, &#123; Router &#125; <span class="keyword">from</span> <span class="string">"express"</span>;</span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">"http"</span>;</span><br><span class="line"></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">WS</span> </span>&#123;</span><br><span class="line">    private wss: WebSocket.Server;</span><br><span class="line">    private server: http.Server;</span><br><span class="line">    private session: express.RequestHandler;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">constructor</span>(server: http.Server, session: express.RequestHandler) &#123;</span><br><span class="line">        <span class="keyword">this</span>.server = server;</span><br><span class="line">        <span class="keyword">this</span>.session = session;</span><br><span class="line">        <span class="keyword">this</span>.init(server, session);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private init(serve: http.Server, <span class="attr">session</span>: any) &#123;</span><br><span class="line">        <span class="keyword">this</span>.wss = <span class="keyword">new</span> WebSocket.Server(&#123;</span><br><span class="line">            </span><br><span class="line">            verifyClient:<span class="function">(<span class="params">info: &#123;origin: string; secure: boolean; req: any &#125;, done</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'Parsing session from request...'</span>);</span><br><span class="line">                session(info.req,( )=&gt;&#123;&#125;, ()=&gt;&#123;</span><br><span class="line">                    <span class="keyword">if</span>(<span class="keyword">this</span>.isSessionPassport(info.req))&#123;</span><br><span class="line">                        done(info.req.session);</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        <span class="comment">// done(false,401,'unathorized');</span></span><br><span class="line">                        done(<span class="literal">true</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="built_in">console</span>.log(info.req.session.id);</span><br><span class="line"></span><br><span class="line">                &#125;)                </span><br><span class="line">            &#125;, <span class="attr">server</span>: serve </span><br><span class="line">            , <span class="attr">path</span>: <span class="string">"/"</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">/* this.pushController = new PushController(this.wss);</span></span><br><span class="line"><span class="comment">        this.pushController.startPush(); */</span></span><br><span class="line">        <span class="keyword">this</span>.connection();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private connection()&#123;</span><br><span class="line">        <span class="keyword">this</span>.wss.on(<span class="string">"connection"</span>,(ws: WebSocket) =&gt; &#123;</span><br><span class="line">            <span class="comment">// this.pushController.broadcastPush("100" , "msg");</span></span><br><span class="line">            ws.on(<span class="string">"message"</span>, (msg: string) =&gt; &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(msg);                 </span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;);        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private isSessionPassport(req: express.Request)&#123;</span><br><span class="line">        <span class="keyword">if</span>(req.session.passport &amp;&amp; req.session.passport.user)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(req.session.passport.user);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"no passport"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">                </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;EXPRESS-node-js-to-WebSocket-세션-공유&quot;&gt;&lt;a href=&quot;#EXPRESS-node-js-to-WebSocket-세션-공유&quot; class=&quot;headerlink&quot; title=&quot;EXPRESS(node.js) to WebS
      
    
    </summary>
    
      <category term="NODEJS" scheme="https://skarlsla.github.io/categories/NODEJS/"/>
    
    
      <category term="NODEJS" scheme="https://skarlsla.github.io/tags/NODEJS/"/>
    
      <category term="EXPRESS" scheme="https://skarlsla.github.io/tags/EXPRESS/"/>
    
      <category term="WebSocket" scheme="https://skarlsla.github.io/tags/WebSocket/"/>
    
  </entry>
  
  <entry>
    <title>[TYPESCRIPT] 타입스크립트 디자인 패턴 - Singleton</title>
    <link href="https://skarlsla.github.io/2019/07/11/pattern/"/>
    <id>https://skarlsla.github.io/2019/07/11/pattern/</id>
    <published>2019-07-11T07:24:30.000Z</published>
    <updated>2019-07-11T07:34:26.407Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Singleton-Pattern"><a href="#Singleton-Pattern" class="headerlink" title="Singleton Pattern"></a>Singleton Pattern</h3><p>The singleton pattern is a creational software design pattern.</p><p>클래스가 단 하나의 인스턴스 만 갖도록 보장한다.</p><p><strong>이점</strong></p><ol><li>하나의 인스턴스만 할당함으로 메모리낭비 방지.</li><li>하나의 프로세스에서 공유자원 접근시 이점</li><li>db커넥션풀, 로그 등에 사용됨.</li></ol><p><strong>단점</strong></p><ol><li>멀티 프로세스 상황에서 인스턴스공유 이슈 생길수있음</li><li>하나의 인스턴스로 많은 작업을 하게될 경우 문제</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123; </span><br><span class="line">    private <span class="keyword">static</span> instance: Singleton; </span><br><span class="line">    private _temperature: number; </span><br><span class="line">    private <span class="keyword">constructor</span>() &#123; &#125; </span><br><span class="line">    <span class="keyword">static</span> getInstance() &#123; </span><br><span class="line">        <span class="keyword">if</span> (!Singleton.instance) &#123; </span><br><span class="line">            Singleton.instance = <span class="keyword">new</span> Singleton(); </span><br><span class="line">            Singleton.instance._temperature = <span class="number">0</span>; </span><br><span class="line">            &#125; </span><br><span class="line">        <span class="keyword">return</span> Singleton.instance; </span><br><span class="line">    &#125; </span><br><span class="line">    get temperature(): number &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._temperature; </span><br><span class="line">    &#125; </span><br><span class="line">    set temperature(score) &#123; </span><br><span class="line">        <span class="keyword">this</span>._temperature = score; </span><br><span class="line">    &#125; </span><br><span class="line">    increaseTemperature(): number &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._temperature += <span class="number">1</span>; </span><br><span class="line">    &#125; </span><br><span class="line">    decreaseTemperature(): number &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._temperature -= <span class="number">1</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">const</span> myInstance = Singleton.getInstance(); </span><br><span class="line"><span class="keyword">const</span> myInstance2 = Singleton.getInstance(); </span><br><span class="line"><span class="built_in">console</span>.log(myInstance === myInstance2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Singleton-Pattern&quot;&gt;&lt;a href=&quot;#Singleton-Pattern&quot; class=&quot;headerlink&quot; title=&quot;Singleton Pattern&quot;&gt;&lt;/a&gt;Singleton Pattern&lt;/h3&gt;&lt;p&gt;The single
      
    
    </summary>
    
      <category term="patterns" scheme="https://skarlsla.github.io/categories/patterns/"/>
    
    
      <category term="typescript" scheme="https://skarlsla.github.io/tags/typescript/"/>
    
      <category term="pattern" scheme="https://skarlsla.github.io/tags/pattern/"/>
    
      <category term="singleton" scheme="https://skarlsla.github.io/tags/singleton/"/>
    
  </entry>
  
</feed>
